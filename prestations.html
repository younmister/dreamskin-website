<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="icon" type="image/png" href="logos/Frame1.png">
    <link rel="apple-touch-icon" href="logos/Frame1.png">
    <link rel="shortcut icon" href="logos/Frame1.png">

    <title>Dream Skin - Prestations</title>
    <meta name="description" content="Découvrez nos expériences premium : Head Spa, Massage et Skincare coréenne. Des rituels sur-mesure dans un écrin de douceur.">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --sage-green: #AFCFBA;
            --pure-white: #FFFFFF;
            --soft-gray: #DCCDDC;
            --dark-green: #2C3E2D;
            --text-dark: #333333;
            --text-light: #666666;
            --accent-gold: #D4AF37;
            /* New Modal Variables */
            --modal-shadow-strong: 0 40px 150px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(215, 232, 210, 0.4);
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            overflow-x: hidden;
            background: var(--pure-white);
        }

        /* ============================================
           FLOATING MENU - Enhanced with modern styling
           ============================================ */
        .floating-menu-trigger {
            position: fixed;
            top: 50%;
            right: 2rem;
            transform: translateY(-50%);
            width: 85px;
            height: 85px;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(25px) saturate(180%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: grab;
            z-index: 2000;
            touch-action: none;
            user-select: none;
            -webkit-user-select: none;
            -webkit-touch-callout: none;
            -webkit-tap-highlight-color: transparent;
            box-shadow:
                0 15px 40px rgba(175, 207, 186, 0.35),
                0 8px 16px rgba(0, 0, 0, 0.1),
                inset 0 2px 4px rgba(255, 255, 255, 0.9);
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            animation: floatGently 4s ease-in-out infinite;
            border: 2px solid rgba(175, 207, 186, 0.2);
        }

        .floating-menu-trigger:hover {
            transform: translateY(-50%) scale(1.15);
            box-shadow:
                0 25px 60px rgba(175, 207, 186, 0.5),
                0 12px 24px rgba(0, 0, 0, 0.15),
                inset 0 2px 4px rgba(255, 255, 255, 1),
                0 0 40px rgba(175, 207, 186, 0.4);
            border-color: rgba(175, 207, 186, 0.4);
        }

        .trigger-butterfly {
            width: 50px;
            height: 50px;
            fill: var(--sage-green);
            transition: all 0.4s ease;
            animation: butterflyWings 2s ease-in-out infinite;
        }

        .floating-menu-trigger:hover .trigger-butterfly {
            fill: var(--dark-green);
            transform: rotate(10deg) scale(1.1);
            filter: drop-shadow(0 6px 16px rgba(175, 207, 186, 0.5));
        }

        .floating-menu-trigger:active {
            cursor: grabbing;
        }

        .floating-menu-trigger.dragging {
            cursor: grabbing;
            transform: scale(1.1);
            box-shadow:
                0 25px 50px rgba(175, 207, 186, 0.5),
                0 0 0 2px rgba(175, 207, 186, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.9);
            transition: none;
            animation: none;
        }

        .trigger-pulse {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 2px solid var(--sage-green);
            opacity: 0;
            animation: pulseRing 3s ease-out infinite;
        }

        @keyframes butterflyWings {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes pulseRing {
            0% { transform: translate(-50%, -50%) scale(0.8); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(2); opacity: 0; }
        }

        @keyframes floatGently {
            0%, 100% { transform: translateY(-50%) translateX(0); }
            50% { transform: translateY(-50%) translateX(-5px); }
        }

        /* Portal Menu */
        .portal-menu {
            position: fixed;
            top: 0;
            right: -500px;
            width: 450px;
            height: 100vh;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(30px);
            z-index: 3000;
            transition: right 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            border-left: 1px solid rgba(175, 207, 186, 0.2);
            box-shadow: -20px 0 60px rgba(0, 0, 0, 0.1);
        }

        /* Ensure desktop width is maintained */
        @media (min-width: 769px) {
            .portal-menu {
                width: 450px;
                right: -500px;
            }
        }

        .portal-menu.open {
            right: 0;
        }

        .portal-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
        }

        .portal-glow {
            position: absolute;
            top: 20%;
            left: -50%;
            width: 200%;
            height: 60%;
            background: radial-gradient(ellipse at center, 
                rgba(175, 207, 186, 0.1) 0%, 
                rgba(175, 207, 186, 0.05) 40%, 
                transparent 70%);
            animation: portalGlow 8s ease-in-out infinite;
        }

        @keyframes portalGlow {
            0%, 100% { transform: translateY(0) scale(1); opacity: 0.5; }
            50% { transform: translateY(-20px) scale(1.1); opacity: 0.8; }
        }

        .portal-particles {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--sage-green);
            border-radius: 50%;
            opacity: 0.6;
        }

        .particle:nth-child(1) {
            top: 20%;
            left: 20%;
            animation: floatParticle 6s ease-in-out infinite;
        }

        .particle:nth-child(2) {
            top: 40%;
            right: 30%;
            animation: floatParticle 8s ease-in-out infinite reverse;
        }

        .particle:nth-child(3) {
            top: 60%;
            left: 40%;
            animation: floatParticle 7s ease-in-out infinite;
        }

        .particle:nth-child(4) {
            top: 80%;
            right: 20%;
            animation: floatParticle 9s ease-in-out infinite reverse;
        }

        .particle:nth-child(5) {
            top: 30%;
            left: 60%;
            animation: floatParticle 5s ease-in-out infinite;
        }

        @keyframes floatParticle {
            0%, 100% { transform: translateY(0) translateX(0); opacity: 0.3; }
            33% { transform: translateY(-20px) translateX(10px); opacity: 0.8; }
            66% { transform: translateY(10px) translateX(-5px); opacity: 0.5; }
        }

        .close-portal-btn {
            position: absolute;
            top: 2rem;
            right: 2rem;
            width: 40px;
            height: 40px;
            background: none;
            border: none;
            cursor: pointer;
            z-index: 10;
            transition: transform 0.3s ease;
        }

        .close-portal-btn:hover {
            transform: rotate(90deg);
        }

        .close-portal-btn span {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 25px;
            height: 2px;
            background: var(--dark-green);
            transition: all 0.3s ease;
        }

        .close-portal-btn span:first-child {
            transform: translate(-50%, -50%) rotate(45deg);
        }

        .close-portal-btn span:last-child {
            transform: translate(-50%, -50%) rotate(-45deg);
        }

        .close-portal-btn:hover {
            background: rgba(215, 232, 210, 0.25);
            transform: rotate(90deg) scale(1.1);
            border-color: var(--sage-green);
            box-shadow: 0 8px 24px rgba(175, 207, 186, 0.3);
        }

        .close-portal-btn span {
            position: absolute;
            width: 22px;
            height: 2px;
            background: var(--dark-green);
            transition: all 0.3s ease;
            border-radius: 2px;
        }

        .close-portal-btn span:first-child {
            transform: rotate(45deg);
        }

        .close-portal-btn span:last-child {
            transform: rotate(-45deg);
        }

        .portal-content {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
            padding: 2rem;
            perspective: 1000px;
        }

        .portal-title {
            font-family: 'Inter', sans-serif;
            font-size: 1.2rem;
            font-weight: 300;
            color: var(--text-light);
            margin-bottom: 3rem;
            text-transform: uppercase;
            letter-spacing: 3px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease;
        }

        .portal-menu.open .portal-title {
            opacity: 1;
            transform: translateY(0);
            transition-delay: 0.2s;
        }

        .portal-nav {
            display: flex;
            flex-direction: column;
            gap: 2rem;
            width: 100%;
        }

        .portal-link {
            position: relative;
            font-family: 'Inter', sans-serif;
            font-size: 1.8rem;
            font-weight: 500;
            color: var(--dark-green);
            text-decoration: none;
            padding: 1rem 0;
            opacity: 0;
            transform: translateY(50px) rotateX(-90deg);
            transform-origin: center bottom;
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .portal-link.animate-in {
            opacity: 1;
            transform: translateY(0) rotateX(0deg);
        }

        .portal-link:hover {
            transform: translateY(0) rotateX(0deg) translateX(10px);
            color: var(--sage-green);
        }

        .link-text {
            position: relative;
            z-index: 2;
            transition: all 0.3s ease;
        }

        .link-underline {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--sage-green), var(--dark-green));
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .portal-link:hover .link-underline {
            width: 100%;
        }

        .portal-link::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(175, 207, 186, 0.1), 
                transparent);
            transition: left 0.6s ease;
        }

        .portal-link:hover::before {
            left: 100%;
        }

        /* Styles spéciaux pour le bouton Réservation */
        .portal-link.reservation-highlight {
            background: linear-gradient(135deg, var(--sage-green), var(--dark-green));
            color: white !important;
            border-radius: 12px;
            padding: 1.2rem 2rem;
            margin: 0.5rem 0;
            box-shadow: 
                0 8px 25px rgba(175, 207, 186, 0.3),
                0 4px 12px rgba(175, 207, 186, 0.2);
            position: relative;
            overflow: hidden;
            font-weight: 600;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }

        .portal-link.reservation-highlight::before {
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.2), 
                transparent);
        }

        .portal-link.reservation-highlight:hover {
            transform: translateY(0) rotateX(0deg) translateX(10px) scale(1.05);
            box-shadow: 
                0 12px 35px rgba(175, 207, 186, 0.4),
                0 6px 18px rgba(175, 207, 186, 0.3);
        }

        .portal-link.reservation-highlight .link-text {
            color: white !important;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .portal-link.reservation-highlight .link-underline {
            background: rgba(255, 255, 255, 0.3);
            height: 3px;
        }

        /* Animation de pulsation pour le bouton Réservation */
        .portal-link.reservation-highlight::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, 
                transparent 30%, 
                rgba(255, 255, 255, 0.1) 50%, 
                transparent 70%);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }

        .portal-link.reservation-highlight:hover::after {
            transform: translateX(100%);
        }

        /* ============================================
           HERO SECTION - Modernized with glassmorphism
           ============================================ */
        .hero {
            height: 100vh;
            background:
                radial-gradient(circle at 30% 20%, rgba(215, 232, 210, 0.12) 0%, transparent 50%),
                radial-gradient(circle at 70% 80%, rgba(220, 205, 220, 0.08) 0%, transparent 50%),
                linear-gradient(to bottom, #fefefe, #f8fdf9);
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero-content {
            max-width: 1000px;
            padding: 0 2rem;
            animation: heroFadeIn 1.4s cubic-bezier(0.34, 1.56, 0.64, 1) both;
            position: relative;
            z-index: 2;
        }

        .hero-title {
            font-family: 'Inter', sans-serif;
            font-size: 4.5rem;
            font-weight: 200;
            color: var(--dark-green);
            margin-bottom: 1.5rem;
            text-transform: uppercase;
            letter-spacing: 6px;
            position: relative;
            display: inline-block;
        }

        .hero-title::after {
            content: '';
            position: absolute;
            bottom: -18px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--sage-green), transparent);
        }

        .hero-subtitle {
            font-family: 'Dancing Script', cursive;
            font-size: 2.2rem;
            color: var(--sage-green);
            margin-bottom: 3rem;
            font-weight: 500;
            font-style: italic;
        }

        @keyframes heroFadeIn {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ============================================
           SERVICES SHOWCASE - Ultra Modern Cards
           ============================================ */
        .services-master-container {
            min-height: 100vh;
            background: linear-gradient(135deg, #fafcfb 0%, #f0f5f2 100%);
            position: relative;
            overflow: hidden;
            padding: 8rem 0 0.5rem 0;
        }

        /* Service Sections */
        .service-section {
            min-height: 60vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0.5rem 0;
        }

        /* Flèche de scroll pour étapes Formule et Type sur tous les écrans */
        .formule-scroll-arrow {
            position: fixed;
            bottom: 140px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 40px;
            background: rgba(175, 207, 186, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 50%;
            display: none;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 1001;
            box-shadow: 0 4px 15px rgba(175, 207, 186, 0.3);
            transition: all 0.3s ease;
            animation: bounceArrow 2s infinite;
        }

        .formule-scroll-arrow:hover {
            background: rgba(175, 207, 186, 1);
            transform: translateX(-50%) scale(1.1);
        }

        .formule-scroll-arrow svg {
            width: 20px;
            height: 20px;
            fill: white;
        }

        @keyframes bounceArrow {
            0%, 20%, 50%, 80%, 100% {
                transform: translateX(-50%) translateY(0);
            }
            40% {
                transform: translateX(-50%) translateY(-5px);
            }
            60% {
                transform: translateX(-50%) translateY(-3px);
            }
        }

        /* Ajustements de position pour différentes tailles d'écran */
        @media (min-width: 769px) and (max-width: 1024px) {
            .formule-scroll-arrow {
                bottom: 258px; /* 184px + 40% = 258px */
                width: 45px;
                height: 45px;
            }
            
            .formule-scroll-arrow svg {
                width: 22px;
                height: 22px;
            }
        }

        @media (min-width: 1025px) {
            .formule-scroll-arrow {
                bottom: 273px; /* 195px + 40% = 273px */
                width: 50px;
                height: 50px;
            }
            
            .formule-scroll-arrow svg {
                width: 24px;
                height: 24px;
            }
        }

        /* Mobile adjustments for service sections */
        @media (max-width: 768px) {
            .services-master-container {
                padding: 6rem 0 0.25rem 0;
            }
            
            .service-section {
                min-height: 50vh;
                padding: 0.25rem 0;
            }

            /* Reset transforms on mobile for all services */
            .service-showcase[data-service="massage"] .service-visual,
            .service-showcase[data-service="massage"] .service-content-block,
            .service-showcase[data-service="lashlift"] .service-visual,
            .service-showcase[data-service="lashlift"] .service-content-block {
                transform: none;
            }

            .service-showcase[data-service="massage"],
            .service-showcase[data-service="lashlift"] {
                flex-direction: column;
            }
        }

        /* Services Tabs Menu */
        .services-tabs-menu {
            position: fixed;
            top: 2rem;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
            margin-bottom: 4rem;
            display: flex;
            justify-content: center;
            transition: all 0.3s ease;
            opacity: 0;
            visibility: hidden;
        }

        .services-tabs-container {
            display: flex;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border-radius: 50px;
            padding: 0.5rem;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.1),
                0 2px 8px rgba(175, 207, 186, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            gap: 0.5rem;
        }

        .service-tab {
            padding: 1rem 2rem;
            background: transparent;
            border: none;
            border-radius: 40px;
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            font-size: 0.9rem;
            letter-spacing: 1px;
            text-transform: uppercase;
            color: var(--text-light);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            overflow: hidden;
        }

        .service-tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--dark-green) 0%, var(--sage-green) 100%);
            opacity: 0;
            transition: opacity 0.4s ease;
            border-radius: 40px;
        }

        .service-tab span {
            position: relative;
            z-index: 2;
        }

        .service-tab.active {
            color: var(--pure-white);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(44, 62, 45, 0.3);
        }

        .service-tab.active::before {
            opacity: 1;
        }

        .service-tab:hover:not(.active) {
            color: var(--dark-green);
            transform: translateY(-1px);
            background: rgba(175, 207, 186, 0.1);
        }

        /* Hide tabs menu when not in services section */
        .services-tabs-menu.hidden {
            opacity: 0;
            visibility: hidden;
            transform: translateX(-50%) translateY(-20px);
            pointer-events: none;
        }

        /* Show tabs menu when in services section */
        .services-tabs-menu.visible {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%);
        }

        .services-grid-wrapper {
            max-width: 1600px;
            margin: 0 auto;
            padding: 4rem 2rem;
        }

        .service-showcase {
            display: grid;
            grid-template-columns: 1.2fr 1fr; /* Image large, carte fine */
            gap: 5rem;
            align-items: center;
            margin-bottom: 8rem;
            opacity: 0;
            transform: translateY(60px);
            transition: all 1s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        /* Animation initiale - positions hors écran */
        .service-showcase .service-visual {
            opacity: 0;
            transition: all 1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .service-showcase .service-content-block {
            opacity: 0;
            transition: all 1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        /* Head Spa & Skincare : image à gauche, carte à droite */
        .service-showcase[data-service="head-spa"] .service-visual,
        .service-showcase[data-service="skincare"] .service-visual {
            transform: translateX(-200px);
        }

        .service-showcase[data-service="head-spa"] .service-content-block,
        .service-showcase[data-service="skincare"] .service-content-block {
            transform: translateX(200px);
        }

        /* Massage & Lashlift : image à droite, carte à gauche */
        .service-showcase[data-service="massage"] .service-visual,
        .service-showcase[data-service="lashlift"] .service-visual {
            transform: translateX(200px);
            order: 2;
        }

        .service-showcase[data-service="massage"] .service-content-block,
        .service-showcase[data-service="lashlift"] .service-content-block {
            transform: translateX(-200px);
            order: 1;
        }

        /* Force the layout for massage and lashlift sections */
        .service-showcase[data-service="massage"],
        .service-showcase[data-service="lashlift"] {
            flex-direction: row-reverse;
            grid-template-columns: 1fr 1.2fr; /* Carte fine, image large */
        }

        .service-showcase.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* États animés - positions finales */
        .service-showcase.visible .service-visual {
            opacity: 1;
            transform: translateX(0);
        }

        .service-showcase.visible .service-content-block {
            opacity: 1;
            transform: translateX(0);
        }

        /* Uniform proportions for all sections - image large, carte fine */
        .service-showcase:nth-child(even) {
            grid-template-columns: 1.2fr 1fr; /* Image large, carte fine */
        }

        .service-showcase:nth-child(even) .service-visual {
            order: 1; /* Image toujours en premier */
        }

        /* Visual Card with Glassmorphism */
        .service-visual {
            position: relative;
            height: 650px;
            border-radius: 35px;
            overflow: hidden;
            background:
                linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(248, 252, 246, 0.85)),
                url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" opacity="0.04"><circle cx="20" cy="20" r="1" fill="%23D7E8D2"/><circle cx="80" cy="40" r="0.5" fill="%23DCCDDC"/><circle cx="50" cy="70" r="1.5" fill="%23D7E8D2"/></svg>');
            backdrop-filter: blur(30px) saturate(150%);
            box-shadow:
                0 30px 90px rgba(0, 0, 0, 0.1),
                0 15px 45px rgba(175, 207, 186, 0.2),
                inset 0 2px 0 rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(215, 232, 210, 0.3);
            transition: all 0.7s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .service-visual:hover {
            transform: translateY(-15px) scale(1.02);
            box-shadow:
                0 40px 120px rgba(0, 0, 0, 0.15),
                0 20px 60px rgba(175, 207, 186, 0.3),
                inset 0 2px 0 rgba(255, 255, 255, 1);
            border-color: rgba(175, 207, 186, 0.5);
        }

        .service-visual-bg {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .service-visual-icon {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: drop-shadow(0 15px 50px rgba(215, 232, 210, 0.5));
            transition: all 0.7s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .service-visual:hover .service-visual-icon {
            transform: scale(1.02);
            filter: drop-shadow(0 20px 70px rgba(215, 232, 210, 0.7));
        }

        .service-visual-badge {
            position: absolute;
            top: 2.5rem;
            right: 2.5rem;
            padding: 1rem 2rem;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(25px) saturate(180%);
            border-radius: 60px;
            font-size: 0.9rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            box-shadow:
                0 15px 45px rgba(0, 0, 0, 0.08),
                0 8px 20px rgba(175, 207, 186, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            color: var(--dark-green);
        }

        .visual-badge-recommended {
            background: rgba(175, 207, 186, 0.25);
            backdrop-filter: blur(25px) saturate(180%);
            color: var(--dark-green);
            border: 1px solid rgba(175, 207, 186, 0.3);
            box-shadow:
                0 15px 45px rgba(175, 207, 186, 0.2),
                0 8px 20px rgba(175, 207, 186, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
        }

        .service-visual:hover .service-visual-badge {
            transform: scale(1.08) translateY(-3px);
            background: rgba(255, 255, 255, 0.25);
            border-color: rgba(255, 255, 255, 0.3);
            box-shadow:
                0 20px 60px rgba(0, 0, 0, 0.12),
                0 12px 30px rgba(175, 207, 186, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.5);
        }

        .service-visual:hover .visual-badge-recommended {
            background: rgba(175, 207, 186, 0.35);
            border-color: rgba(175, 207, 186, 0.4);
            box-shadow:
                0 20px 60px rgba(175, 207, 186, 0.25),
                0 12px 30px rgba(175, 207, 186, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.5);
        }

        /* Content Block with Enhanced Typography */
        .service-content-block {
            padding: 2.5rem;
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(20px);
            border-radius: 30px;
            border: 1px solid rgba(215, 232, 210, 0.2);
            box-shadow:
                0 20px 60px rgba(0, 0, 0, 0.06),
                inset 0 1px 0 rgba(255, 255, 255, 0.9);
        }

        .service-category {
            font-size: 0.95rem;
            font-weight: 700;
            color: var(--sage-green);
            text-transform: uppercase;
            letter-spacing: 3px;
            margin-bottom: 1.25rem;
        }

        .service-showcase-title {
            font-size: 3rem;
            font-weight: 200;
            color: var(--dark-green);
            margin-bottom: 1.25rem;
            text-transform: uppercase;
            letter-spacing: 4px;
            line-height: 1;
        }

        .service-showcase-tagline {
            font-family: 'Dancing Script', cursive;
            font-size: 2.2rem;
            color: var(--sage-green);
            margin-bottom: 2.5rem;
            font-style: italic;
            opacity: 0.95;
        }

        .service-showcase-description {
            font-size: 1.2rem;
            line-height: 2;
            color: var(--text-light);
            margin-bottom: 3.5rem;
        }


        .service-showcase-description p {
            margin-bottom: 0.8rem;
        }

        .service-showcase-description p:last-child {
            margin-bottom: 0;
        }

        /* Benefits Pills - Modern Design */
        .service-benefits-list {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 3.5rem;
        }

        .benefit-pill {
            padding: 1rem 1.75rem;
            background: linear-gradient(135deg, rgba(215, 232, 210, 0.2), rgba(215, 232, 210, 0.1));
            border: 2px solid rgba(215, 232, 210, 0.35);
            border-radius: 60px;
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            gap: 0.75rem;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            backdrop-filter: blur(10px);
        }

        .benefit-pill:hover {
            background: linear-gradient(135deg, rgba(215, 232, 210, 0.35), rgba(215, 232, 210, 0.25));
            border-color: var(--sage-green);
            transform: translateY(-4px);
            box-shadow: 0 8px 20px rgba(215, 232, 210, 0.4);
        }

        /* Animation for benefit pills */
        .benefit-pill {
            opacity: 0;
            transform: translateY(30px) scale(0.9);
            transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .benefit-pill.animate-in {
            opacity: 1;
            transform: translateY(0) scale(1);
        }

        /* Staggered animation delay for each pill */
        .benefit-pill:nth-child(1) { transition-delay: 0.1s; }
        .benefit-pill:nth-child(2) { transition-delay: 0.2s; }
        .benefit-pill:nth-child(3) { transition-delay: 0.3s; }
        .benefit-pill:nth-child(4) { transition-delay: 0.4s; }

        .benefit-pill-icon {
            font-size: 1.4rem;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
        }

        /* CTA Button - Style du bouton "Notre histoire" */
        .service-cta-button {
            display: inline-block;
            padding: 1.25rem 2.5rem;
            background: linear-gradient(135deg, var(--dark-green) 0%, var(--sage-green) 100%);
            color: var(--pure-white);
            text-decoration: none;
            border-radius: 50px;
            font-weight: 500;
            text-transform: uppercase;
            font-size: 1.1rem;
            letter-spacing: 1.5px;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 8px 25px rgba(175, 207, 186, 0.3);
            position: relative;
            overflow: hidden;
            border: none;
            margin-top: 1.5rem;
            outline: none;
            cursor: pointer;
            opacity: 0;
            transform: translateY(40px) scale(0.8);
        }

        /* Animation for CTA button */
        .service-cta-button.animate-in {
            opacity: 1;
            transform: translateY(0) scale(1);
            transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .service-cta-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s ease;
        }

        .service-cta-button:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 20px 50px rgba(175, 207, 186, 0.5);
            background: var(--sage-green);
            border: none;
        }

        .service-cta-button:hover::before {
            left: 100%;
        }

        /* ============================================
           MODAL SYSTEM - Ultra Modern Glassmorphism REDESIGN
           ============================================ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            /* Frosted glass overlay inspired by the overall design */
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(40px) saturate(180%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            /* Significantly increased size */
            width: 1100px;
            max-width: 95vw;
            background:
                linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(248, 252, 246, 0.96)),
                url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" opacity="0.03"><circle cx="20" cy="20" r="1" fill="%23D7E8D2"/><circle cx="80" cy="40" r="0.5" fill="%23DCCDDC"/></svg>');
            backdrop-filter: blur(40px) saturate(180%);
            border-radius: 40px;
            box-shadow: var(--modal-shadow-strong);
            overflow: hidden;
            position: relative;
            max-height: 85vh;
            transform: scale(0.7) translateY(80px);
            transition: all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            flex-direction: column;
        }

        .modal-overlay.active .modal {
            transform: scale(1) translateY(0);
        }

        .modal-header {
            padding: 45px 60px 30px; /* Increased padding */
            text-align: center;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.7), rgba(248, 252, 246, 0.5));
            backdrop-filter: blur(25px);
            border-bottom: 1px solid rgba(215, 232, 210, 0.4); /* Stronger separator */
            position: relative;
            flex-shrink: 0; /* Keep header fixed at top */
        }

        .modal-title {
            font-size: 2.8rem; /* Larger title */
            font-weight: 300;
            color: var(--dark-green);
            margin-bottom: 10px;
            letter-spacing: 4px;
            text-transform: uppercase;
        }

        .modal-subtitle {
            font-size: 1.1rem;
            color: var(--text-light); /* Better contrast */
            font-weight: 400;
            opacity: 0.9;
        }

        .close-button {
            position: absolute;
            top: 35px;
            right: 35px;
            background: rgba(215, 232, 210, 0.2);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(215, 232, 210, 0.35);
            font-size: 32px;
            color: var(--dark-green);
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            width: 48px; /* Larger hit area */
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            z-index: 10;
        }

        .close-button:hover {
            color: var(--sage-green);
            background: rgba(215, 232, 210, 0.35);
            transform: rotate(90deg) scale(1.15);
            box-shadow: 0 8px 24px rgba(175, 207, 186, 0.4);
        }

        /* Progress Steps - Retained and Enhanced Placement */
        .progress-steps {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 25px;
            margin-top: 5px; /* Minimal separation */
            padding: 10px 20px; /* Minimal padding */
            /* Inspired by .service-visual and .benefit-pill */
            background: linear-gradient(135deg, rgba(215, 232, 210, 0.25), rgba(248, 252, 246, 0.25));
            backdrop-filter: blur(15px);
            border-radius: 60px;
            box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(215, 232, 210, 0.4);
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }

        .progress-step {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.9rem; /* Slightly larger text */
            color: #b0c2a8; /* Darker initial color for better contrast */
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            font-weight: 700;
            letter-spacing: 1.5px;
            text-transform: uppercase;
        }
        
        /* Added class for Skincare with 4 steps */
        .progress-steps.four-steps .progress-line {
            width: 30px; /* Reduced line width for 4 steps */
        }

        .progress-step.active {
            color: var(--sage-green);
            transform: scale(1.12);
        }

        .progress-dot {
            width: 14px; /* Larger dot */
            height: 14px;
            border-radius: 50%;
            background: #e2e8f0;
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }

        .progress-step.active .progress-dot {
            background: linear-gradient(135deg, var(--sage-green), #a8b89a);
            box-shadow:
                0 0 0 6px rgba(175, 207, 186, 0.35), /* Larger halo */
                0 5px 15px rgba(175, 207, 186, 0.45);
            transform: scale(1.35);
        }

        .progress-step.completed {
            color: var(--sage-green);
        }

        .progress-step.completed .progress-dot {
            background: linear-gradient(135deg, var(--sage-green), #a8b89a);
            box-shadow: 0 3px 10px rgba(175, 207, 186, 0.4);
            transform: scale(1.1);
        }

        .progress-line {
            width: 45px;
            height: 3px;
            background: #e2e8f0;
            border-radius: 3px;
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .progress-line.completed {
            background: linear-gradient(90deg, var(--sage-green), #a8b89a);
            box-shadow: 0 3px 10px rgba(175, 207, 186, 0.4);
        }

        /* Modal Content */
        .modal-content {
            overflow-y: auto;
            overflow-x: hidden;
            flex: 1;
            display: flex;
            flex-direction: column;
            position: relative;
            flex-grow: 1;
            max-height: calc(100vh - 280px); /* Header + Navigation */
        }

        .steps-container {
            position: relative;
            width: 100%;
            height: 100%;
            min-height: 650px;
        }

            .step {
                width: 100%;
                opacity: 0;
                transform: translateX(50px);
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                z-index: 1;
                padding: 25px 60px 40px 60px;
                min-height: 650px;
                display: none;
                flex-direction: column;
                transition: all 0.6s ease-out;
                pointer-events: none; /* Désactiver les interactions par défaut */
            }

            /* Activer les interactions pour l'étape active */
            .step.active {
                pointer-events: auto;
            }

            .step.active {
                opacity: 1;
                transform: translateX(0);
                display: flex;
            }

            /* Mobile step adjustments */
            @media (max-width: 768px) {
                .step {
                    padding: 5px 10px;
                    min-height: auto;
                    position: relative;
                }
            }

        .step-title {
            font-size: 2rem;
            font-weight: 300;
            color: var(--dark-green);
            text-align: center;
            margin-bottom: 20px; /* Réduit encore l'espacement entre la barre du header et le titre */
            letter-spacing: 3px;
            text-transform: uppercase;
        }

        /* ===== FORMULE CARDS - LAYOUT FIXE ===== */
        .formule-cards {
            display: grid !important;
            padding: 10px;
            margin: -10px;
            align-items: stretch; /* Toutes les cartes ont la même hauteur */
            width: 100%;
        }

        /* Head Spa: 4 cartes en grille 2×2 */
        .formule-cards#headSpaCards {
            grid-template-columns: repeat(2, 1fr) !important;
            gap: 25px !important;
            max-width: 100%;
        }

        /* Massage: 4 cartes en grille 2×2 */
        .formule-cards#massageCards {
            grid-template-columns: repeat(2, 1fr) !important;
            gap: 25px !important;
            max-width: 100%;
        }

        /* Force l'interactivité des cartes de massage */
        .formule-cards#massageCards {
            pointer-events: auto !important;
        }
        
        .formule-cards#massageCards .formule-card {
            pointer-events: auto !important;
            cursor: pointer !important;
        }

        /* S'assurer que l'étape 1 (formules) est interactive */
        .step#step1 {
            pointer-events: auto !important;
        }

        /* S'assurer que toutes les cartes de formule sont interactives */
        .formule-cards {
            pointer-events: auto !important;
        }

        .formule-cards .formule-card {
            pointer-events: auto !important;
            cursor: pointer !important;
        }

        /* Lashlift: 2 cartes côte à côte centrées */
        .formule-cards#lashliftCards {
            grid-template-columns: repeat(2, 1fr) !important;
            gap: 25px !important;
            max-width: 100%;
        }

        /* Skincare: 8 cartes en 2 colonnes (uniformisé avec les autres modals) */
        .formule-cards#skincareCards {
            grid-template-columns: repeat(2, 1fr) !important;
            gap: 25px !important;
            max-width: 100%;
        }

        /* Benefits en 2 colonnes pour Head Spa et Massage */
        #headSpaCards .card-benefits,
        #massageCards .card-benefits {
            display: grid !important;
            grid-template-columns: 1fr 1fr !important;
            gap: 8px 15px !important;
        }

        /* Benefits en 2 colonnes pour Lashlift et Skincare (uniformisé avec Head Spa et Massage) */
        #lashliftCards .card-benefits,
        #skincareCards .card-benefits {
            display: grid !important;
            grid-template-columns: 1fr 1fr !important;
            gap: 8px 15px !important;
        }



        .formule-card {
            border: 2px solid rgba(215, 232, 210, 0.35);
            border-radius: 30px; /* Rounded corners */
            padding: 30px; /* Increased padding */
            cursor: pointer;
            transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            background:
                linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(248, 252, 246, 0.95));
            backdrop-filter: blur(25px);
            box-shadow:
                0 15px 45px rgba(0, 0, 0, 0.05),
                inset 0 1px 0 rgba(255, 255, 255, 0.9);
            position: relative;
            overflow: hidden;
            height: 100%; /* Ensure cards fill grid area */
            display: flex;
            flex-direction: column;
            min-height: 0; /* Allow flex items to shrink */
        }

        /* Formula cards are now always visible and clickable since each service has its own modal */

        .formule-card:hover {
            border-color: var(--sage-green);
            transform: translateY(-12px) scale(1.02);
            box-shadow:
                0 30px 90px rgba(175, 207, 186, 0.3),
                0 15px 40px rgba(0, 0, 0, 0.1);
        }

        .formule-card.selected {
            border-color: var(--sage-green);
            background: linear-gradient(135deg, rgba(215, 232, 210, 0.35), rgba(248, 252, 246, 0.98));
            box-shadow:
                0 40px 120px rgba(175, 207, 186, 0.45),
                inset 0 1px 0 rgba(255, 255, 255, 1),
                0 0 50px rgba(215, 232, 210, 0.35);
            transform: scale(1.03);
        }

        .card-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--dark-green);
            margin-bottom: 10px;
            letter-spacing: 0.8px;
        }

        .card-description {
            font-size: 1rem;
            color: var(--text-light);
            line-height: 1.7;
            margin-bottom: 20px;
            flex-grow: 1;
        }

        .card-benefits {
            display: flex;
            flex-direction: column; /* Changed to column for better stacking in new layout */
            gap: 8px;
            margin: 15px 0 20px 0;
            padding-top: 15px;
            border-top: 1px dashed rgba(215, 232, 210, 0.5);
        }


        .benefit-item {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 0.95rem;
            color: var(--text-dark);
            padding: 6px;
            border-radius: 12px;
            transition: all 0.3s ease;
        }
        
        /* Formula Type Card Specific Styling */
        .formule-type-card {
            min-height: 220px;
        }
        
        .formule-type-card .card-benefits {
            display: none; /* Hide for formula types */
        }
        
        .formule-type-card .card-description {
            flex-grow: 1;
            margin-bottom: 0;
        }

        .benefit-item:hover {
            background: rgba(215, 232, 210, 0.2);
            transform: none; /* Removed translateX for cleaner card hover */
        }

        .benefit-check {
            width: 22px;
            height: 22px;
            background: linear-gradient(135deg, var(--sage-green), #a8b89a);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: 700;
            flex-shrink: 0;
            box-shadow: 0 4px 12px rgba(175, 207, 186, 0.4);
        }

        .card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto; /* Push to bottom */
            padding-top: 15px;
            border-top: 1px solid rgba(215, 232, 210, 0.3);
        }

        .card-duration {
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text-color);
            background: rgba(215, 232, 210, 0.2);
            padding: 4px 10px;
            border-radius: 12px;
        }

        .card-price {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--sage-green);
        }

        /* Details Step Styles */
        .details-content {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 400px;
            margin-top: 20px; /* Espacement réduit de 5% vers le haut (40px - 20px = 20px) */
        }

        .details-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 252, 246, 0.9));
            backdrop-filter: blur(20px);
            border: 2px solid rgba(215, 232, 210, 0.3);
            border-radius: 25px;
            padding: 15px 45px; /* Réduit encore un peu plus la hauteur (padding vertical) */
            max-width: 750px; /* Agrandi la largeur */
            width: 100%;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.08);
        }

        .details-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 30px;
            padding-bottom: 25px;
            border-bottom: 2px solid rgba(215, 232, 210, 0.4);
            gap: 20px;
            position: relative; /* Pour le positionnement absolu du toggle */
        }

        .details-header h4 {
            font-size: 1.9rem;
            font-weight: 400;
            color: var(--dark-green);
            margin: 0;
            line-height: 1.3;
            flex: 1;
        }

        .details-info {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 8px;
        }

        .details-duration {
            font-size: 1.05rem;
            font-weight: 600;
            color: var(--text-dark);
            background: rgba(215, 232, 210, 0.25);
            padding: 6px 14px;
            border-radius: 15px;
            border: 1px solid rgba(215, 232, 210, 0.4);
        }

        .details-price {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--sage-green);
        }

        .details-description {
            margin-bottom: 30px;
        }

        .details-description p {
            font-size: 1.1rem;
            line-height: 1.6;
            color: var(--text-color);
            margin: 0;
        }

        .details-benefits h5 {
            font-size: 1.2rem;
            font-weight: 500;
            color: var(--dark-green);
            margin-bottom: 20px;
        }

        .details-benefits ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .details-benefits li {
            padding: 8px 0;
            color: var(--text-color);
            font-size: 1rem;
            line-height: 1.5;
            position: relative;
            padding-left: 25px;
        }

        .details-benefits li::before {
            content: "✨";
            position: absolute;
            left: 0;
            top: 8px;
            font-size: 0.9rem;
        }

        /* SOLO/DUO Toggle Styles - On/Off Button Style */
        .solo-duo-toggle {
            position: absolute;
            top: calc(50% + 10px); /* Décalage de 10px vers le haut (20px - 10px) */
            right: 500px; /* Décalage de 30px vers la gauche (470px + 30px) */
            transform: translateY(-50%);
            padding: 0;
            background: none;
            border: none;
        }

        .toggle-options {
            display: flex;
            background: rgba(255, 255, 255, 0.6);
            border: 2px solid rgba(215, 232, 210, 0.4);
            border-radius: 20px;
            padding: 2px;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .toggle-option {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 6px 12px;
            border: none;
            border-radius: 15px;
            background: transparent;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            min-width: 45px;
            position: relative;
            z-index: 2;
        }

        .toggle-option:hover {
            background: rgba(215, 232, 210, 0.2);
        }

        .toggle-option.active {
            background: var(--sage-green);
            color: white;
            box-shadow: 0 4px 12px rgba(175, 207, 186, 0.4);
            transform: scale(1.05);
        }

        .toggle-icon {
            margin-right: 4px;
        }

        .toggle-icon i {
            width: 12px;
            height: 12px;
        }

        .toggle-option span {
            font-size: 0.65rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        /* Responsive styles for mobile */
        @media (max-width: 768px) {
            .solo-duo-toggle {
                position: static; /* Retour au flux normal sur mobile */
                margin: 10px 0 15px 0;
                display: flex;
                justify-content: center;
                order: 1; /* Place le toggle avant le prix */
            }

            .details-info {
                order: 2; /* Place le prix après le toggle */
            }
        }


        /* Duration Selection - Improved Layout */
        .duration-content {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            flex: 1;
            align-items: center;
            justify-content: center;
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
        }

        .duration-options {
            display: contents; /* Use contents to spread buttons across grid */
        }

        .duration-button {
            padding: 30px 40px; /* Increased padding */
            border: 2px solid rgba(215, 232, 210, 0.35);
            border-radius: 30px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(248, 252, 246, 0.95));
            backdrop-filter: blur(25px);
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            text-align: center;
            box-shadow: 0 10px 35px rgba(0, 0, 0, 0.05);
        }

        .duration-button:hover {
            border-color: var(--sage-green);
            transform: translateY(-12px) scale(1.05);
            box-shadow: 0 30px 80px rgba(175, 207, 186, 0.35);
        }

        .duration-button.selected {
            background: var(--sage-green);
            color: white;
            border-color: transparent;
            box-shadow:
                0 40px 100px rgba(175, 207, 186, 0.5),
                inset 0 2px 4px rgba(255, 255, 255, 0.3);
            transform: scale(1.08);
        }

        .duration-main {
            font-size: 1.6rem;
            font-weight: 700;
            margin-bottom: 8px;
            letter-spacing: 1px;
        }

        .duration-sub {
            font-size: 1rem;
            opacity: 0.9;
            color: var(--sage-green);
            font-weight: 600;
        }

        /* Reservation Step (Step 3/4) - Redesign inspired by reservation.html */
        .summary-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
            gap: 38px;
            padding: 20px 0;
        }

        .summary-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(248, 252, 246, 0.95));
            backdrop-filter: blur(25px);
            border: 2px solid rgba(215, 232, 210, 0.4);
            border-radius: 30px;
            padding: 30px; /* RÉDUIT de 40px à 30px pour une hauteur uniforme */
            width: 100%;
            max-width: 500px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.12);
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            padding: 15px 0; /* RÉDUIT de 20px à 15px pour compenser les 4 lignes */
            border-bottom: 1px solid rgba(215, 232, 210, 0.3);
            font-size: 1.15rem;
        }
        
        .summary-message-block {
            padding: 30px;
            background: rgba(175, 207, 186, 0.15);
            border-radius: 20px;
            border: 1px solid rgba(175, 207, 186, 0.3);
            text-align: center;
            margin-bottom: 20px;
        }
        
        .summary-message {
            font-family: 'Dancing Script', cursive;
            font-size: 1.8rem;
            color: var(--sage-green);
            font-style: italic;
            line-height: 1.5;
            margin: 0;
        }

        .summary-item:last-child {
            border-bottom: none;
            margin-top: 10px; /* RÉDUIT de 15px à 10px */
            padding-top: 20px; /* RÉDUIT de 30px à 20px */
            border-top: 2px solid rgba(215, 232, 210, 0.5);
            font-size: 1.8rem;
            font-weight: 300;
            color: var(--dark-green);
        }
        
        .summary-item-no-border {
            border-bottom: none !important;
        }

        .summary-label {
            color: var(--text-light);
            font-weight: 500;
        }

        .summary-value {
            font-weight: 700;
            color: var(--dark-green);
        }
        
        .summary-item:last-child .summary-value {
            color: var(--sage-green);
            font-weight: 700;
        }

        .cta-button {
            padding: 1.6rem 4rem; /* Increased padding */
            background: linear-gradient(135deg, var(--dark-green), var(--sage-green)); /* Dark green to sage green blend for consistency */
            color: white;
            border: none;
            border-radius: 60px;
            font-size: 1.2rem; /* Larger font */
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 3px;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 25px 60px rgba(44, 62, 45, 0.45);
            position: relative;
            overflow: hidden;
            text-decoration: none; /* Ensure link style is removed */
            display: inline-block;
        }

        .cta-button:hover {
            transform: translateY(-10px) scale(1.05);
            box-shadow: 0 35px 80px rgba(44, 62, 45, 0.6);
            background: var(--sage-green); /* Solid sage on hover */
        }
        
        .cta-button-text {
            position: relative;
            z-index: 2;
        }

        .cta-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.25), transparent);
            transition: left 0.7s ease;
            z-index: 1;
        }

        .cta-button:hover::before {
            left: 100%;
        }

        /* Modal Navigation - Enhanced */
        .modal-navigation {
            padding: 25px 60px 30px 60px;
            border-top: 1px solid rgba(215, 232, 210, 0.4);
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.7), rgba(248, 252, 246, 0.5));
            backdrop-filter: blur(25px);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
            min-height: 90px;
            flex-wrap: nowrap !important;
        }

        .back-button {
            background: rgba(215, 232, 210, 0.25);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(215, 232, 210, 0.4);
            color: var(--dark-green);
            padding: 14px 24px;
            border-radius: 25px;
            font-size: 0.85rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            opacity: 0;
            visibility: hidden;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .back-button.visible {
            opacity: 1;
            visibility: visible;
        }

        .back-button:hover {
            background: rgba(215, 232, 210, 0.35);
            border-color: var(--sage-green);
            transform: translateX(-8px) scale(1.05);
            box-shadow: 0 8px 24px rgba(175, 207, 186, 0.35);
        }

        /* Bouton Précédent grisé pour la première étape */
        .back-button.disabled {
            background: rgba(200, 200, 200, 0.2);
            border: 1px solid rgba(180, 180, 180, 0.3);
            color: rgba(120, 120, 120, 0.6);
            cursor: not-allowed;
            pointer-events: none;
            box-shadow: 0 2px 8px rgba(150, 150, 150, 0.1);
        }

        .back-button.disabled:hover {
            background: rgba(200, 200, 200, 0.2);
            border-color: rgba(180, 180, 180, 0.3);
            transform: none;
            box-shadow: 0 2px 8px rgba(150, 150, 150, 0.1);
        }

        .continue-button {
            background: var(--sage-green);
            border: none;
            color: white;
            padding: 14px 24px;
            border-radius: 25px;
            font-size: 0.85rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            opacity: 0;
            visibility: hidden;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            box-shadow: 0 4px 15px rgba(175, 207, 186, 0.3);
            position: relative;
            z-index: 10;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .continue-button.visible {
            opacity: 1 !important;
            visibility: visible !important;
        }

        .continue-button:hover {
            transform: translateX(8px) scale(1.05);
            box-shadow: 0 8px 24px rgba(175, 207, 186, 0.4);
        }

        /* Reservation button in navigation - uniform size */
        /* FIXED: Desktop button positioning to prevent overflow */
        .modal-navigation .cta-button {
            padding: 14px 35px;
            font-size: 0.85rem;
            border-radius: 25px;
            white-space: nowrap;
            flex: 0 0 auto;
            margin-left: auto;
            margin-right: auto;
            max-width: 420px;
            line-height: 1.3;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Afficher les textes desktop sur desktop */
        .back-text-desktop,
        .continue-text-desktop,
        .cta-button-text-desktop {
            display: inline;
        }

        /* Masquer les textes mobile sur desktop */
        .back-text-mobile,
        .continue-text-mobile,
        .cta-button-text-mobile {
            display: none;
        }

        /* Formula Type Card Specific Styles - for Step 0 */
        .formula-type-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            align-items: stretch;
            justify-items: stretch;
        }

        .formula-type-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            border: 1px solid rgba(215, 232, 210, 0.3);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .formula-type-card:hover {
            transform: translateY(-5px);
            border-color: var(--sage-green);
            box-shadow: 0 10px 30px rgba(44, 62, 45, 0.2);
        }

        .formula-type-card.selected {
            border-color: var(--sage-green);
            background: linear-gradient(135deg, rgba(215, 232, 210, 0.35), rgba(248, 252, 246, 0.98));
            box-shadow: 0 40px 120px rgba(175, 207, 186, 0.45), inset 0 1px 0 rgba(255, 255, 255, 1), 0 0 50px rgba(215, 232, 210, 0.35);
            transform: scale(1.03);
        }

        .type-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--sage-green) 0%, var(--dark-green) 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(44, 62, 45, 0.3);
        }

        .type-icon i {
            color: white;
            font-size: 24px;
        }

        .type-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--dark-green);
            margin-bottom: 15px;
            letter-spacing: 0.5px;
        }

        .type-description {
            font-size: 0.9rem;
            color: rgba(44, 62, 45, 0.8);
            line-height: 1.5;
            margin: 0;
        }

        /* Responsive adjustments */
        @media (max-width: 1024px) {
            .formula-type-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
                max-width: 600px;
            }
            
            /* Toutes les grilles passent en 1 colonne sur mobile */
            .formule-cards#headSpaCards,
            .formule-cards#massageCards,
            .formule-cards#lashliftCards,
            .formule-cards#skincareCards {
                grid-template-columns: 1fr !important;
                max-width: 100% !important;
                margin: 0 !important;
            }

            /* Benefits restent en 2 colonnes pour tous les services sur mobile */
            #headSpaCards .card-benefits,
            #massageCards .card-benefits,
            #lashliftCards .card-benefits,
            #skincareCards .card-benefits {
                grid-template-columns: 1fr 1fr !important;
            }
        }

        @media (max-width: 768px) {
            .formula-type-grid {
                grid-template-columns: 1fr;
                gap: 15px;
                max-width: none;
                padding: 0 10px;
            }

            .formula-type-card {
                padding: 20px;
                min-height: 180px;
            }

            .type-icon {
                width: 50px;
                height: 50px;
                margin-bottom: 15px;
            }

            .type-icon i {
                font-size: 20px;
            }

            .type-title {
                font-size: 1.1rem;
                margin-bottom: 12px;
            }

            .type-description {
                font-size: 0.85rem;
            }
            
            .scroll-indicator {
                bottom: 2rem;
            }

            .scroll-indicator::before {
                font-size: 0.7rem;
                margin-bottom: 0.5rem;
            }

            .floating-menu-trigger {
                width: 60px;
                height: 60px;
                right: 1rem;
                top: 58vh;
                transform: translateY(-50%);
                bottom: auto;
                position: fixed !important;
                z-index: 2000 !important;
                touch-action: none;
                user-select: none;
                -webkit-user-select: none;
            }

            .scroll-to-top {
                width: 40px;
                height: 40px;
                bottom: 11.5rem;
                left: 1.9rem;
            }

            .zen-scroll-progress {
                height: 3px;
            }

            .progress-butterfly {
                width: 14px;
                height: 14px;
                right: -10px;
            }

            .floating-menu-trigger:active {
                cursor: grabbing;
            }

            .trigger-butterfly {
                width: 26px;
                height: 26px;
            }

            .portal-menu {
                width: 100vw;
                right: -100vw;
            }

            .portal-link {
                font-size: 1.3rem;
                padding: 1rem 1.5rem;
            }

            .portal-link.reservation-highlight {
                padding: 1rem 1.5rem;
                font-size: 1.2rem;
                margin: 0.3rem 0;
            }
        }
        
        


        /* ============================================
           SCROLL INDICATOR ANIMATION
           ============================================ */
        .scroll-indicator {
            position: absolute;
            bottom: 3rem;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            animation: scrollIndicatorFloat 3s ease-in-out infinite;
            z-index: 3;
        }

        .scroll-indicator::before {
            content: 'Laissez-vous porter';
            font-size: 0.8rem;
            font-weight: 500;
            color: var(--dark-green);
            letter-spacing: 1px;
            text-transform: uppercase;
            opacity: 0.9;
            animation: scrollTextPulse 2s ease-in-out infinite;
        }

        .scroll-indicator::after {
            content: '';
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .scroll-dots {
            display: flex;
            flex-direction: column;
            gap: 4px;
            align-items: center;
        }

        .scroll-dot {
            width: 6px;
            height: 6px;
            background: var(--dark-green);
            border-radius: 50%;
            opacity: 0.7; 
            animation: scrollDotFall 2s ease-in-out infinite;
        }

        .scroll-dot:nth-child(1) { animation-delay: 0s; }
        .scroll-dot:nth-child(2) { animation-delay: 0.2s; }
        .scroll-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes scrollIndicatorFloat {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-8px); }
        }

        @keyframes scrollTextPulse {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 0.4; }
        }

        @keyframes scrollDotFall {
            0% { 
                opacity: 0.8; 
                transform: translateY(0) scale(1);
            }
            50% { 
                opacity: 0.3; 
                transform: translateY(8px) scale(0.8);
            }
            100% { 
                opacity: 0.8;
                transform: translateY(0) scale(1);
            }
        }

        /* ============================================
           RESPONSIVE DESIGN REDESIGN
           ============================================ */
        @media (max-width: 1024px) {
            .service-showcase {
                grid-template-columns: 1fr;
                gap: 3rem;
            }

            .service-showcase:nth-child(even) {
                grid-template-columns: 1fr;
            }

            .service-showcase:nth-child(even) .service-visual {
                order: 0;
            }

            /* Animations mobiles - tous les éléments viennent du bas */
            .service-showcase .service-visual,
            .service-showcase .service-content-block {
                transform: translateY(100px) !important;
            }

            .service-showcase.visible .service-visual,
            .service-showcase.visible .service-content-block {
                transform: translateY(0) !important;
            }

            .service-visual {
                height: 500px;
            }

            .service-showcase-title {
                font-size: 2.5rem;
            }
            
            /* Modal Tablet */
            .modal {
                width: 95vw;
                max-width: 840px;
                max-height: 90vh;
            }
            
            .modal-header {
                padding: 30px 40px 20px;
            }
            
            .modal-title {
                font-size: 2.2rem;
                letter-spacing: 3px;
            }

            .modal-content {
                padding: 30px 40px;
            }
            
            .step {
                padding: 0; /* Step padding handled by modal-content */
            }
            
            .step-title {
                font-size: 1.6rem;
                margin-bottom: 30px;
            }

            /* Toutes les grilles passent en 1 colonne sur mobile */
            .formule-cards#headSpaCards,
            .formule-cards#massageCards,
            .formule-cards#lashliftCards,
            .formule-cards#skincareCards {
                grid-template-columns: 1fr !important;
                max-width: 100% !important;
                margin: 0 !important;
            }

            /* Benefits restent en 2 colonnes pour tous les services sur mobile */
            #headSpaCards .card-benefits,
            #massageCards .card-benefits,
            #lashliftCards .card-benefits,
            #skincareCards .card-benefits {
                grid-template-columns: 1fr 1fr !important;
            }
            
            .details-card {
                padding: 30px;
                max-width: 90%;
            }

            .details-header h4 {
                font-size: 1.5rem;
            }

            .details-price {
                font-size: 1.2rem;
            }

            .details-description p {
                font-size: 1rem;
            }

            .duration-content {
                grid-template-columns: 1fr;
                gap: 20px;
                max-width: 350px;
            }
            
            .progress-steps.four-steps {
                max-width: 600px;
            }
            
            .progress-line {
                width: 25px;
            }
        }

        /* CORRECTION: Rendre les cartes uniformes sur mobile */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 3rem;
                letter-spacing: 3px;
            }

            .hero-subtitle {
                font-size: 1.8rem;
            }

            .service-showcase {
                margin-bottom: 5rem;
            }

            /* Masquer l'image visuelle pour ALL services */
            .service-visual {
                display: none !important;
            }

            /* Uniformiser la content-block pour tous les services */
            .service-content-block {
                position: relative;
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 252, 246, 0.9));
                backdrop-filter: blur(20px);
                border-radius: 25px;
                padding: 2rem;
                border: 1px solid rgba(215, 232, 210, 0.3);
                box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
                width: 100%;
                max-width: 100%;
                margin: 0 auto;
            }

            /* S'assurer que la grid est une seule colonne */
            .service-showcase {
                grid-template-columns: 1fr !important;
                flex-direction: column !important;
            }

            /* Réinitialiser les ordres et transforms pour tous les services */
            .service-showcase[data-service="head-spa"] .service-visual,
            .service-showcase[data-service="head-spa"] .service-content-block,
            .service-showcase[data-service="massage"] .service-visual,
            .service-showcase[data-service="massage"] .service-content-block,
            .service-showcase[data-service="skincare"] .service-visual,
            .service-showcase[data-service="skincare"] .service-content-block,
            .service-showcase[data-service="lashlift"] .service-visual,
            .service-showcase[data-service="lashlift"] .service-content-block {
                transform: none !important;
                order: auto !important;
            }

            /* Image mobile pour TOUS les services */
            .service-mobile-image {
                display: block !important;
                width: 75%;
                height: 150px;
                margin: 1.5rem auto 2rem auto;
                background-size: cover;
                background-repeat: no-repeat;
                background-position: center;
                border-radius: 20px;
                background-color: rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(10px);
                border: 1px solid rgba(215, 232, 210, 0.3);
                position: relative;
                overflow: hidden;
            }


            /* Ligne de séparation pour Head Spa */
            .service-showcase[data-service="head-spa"] .service-content-block::after {
                content: '';
                position: absolute;
                top: 25%;
                left: 50%;
                transform: translateX(-50%);
                width: 70%;
                height: 1px;
                background: var(--sage-green);
                border-radius: 0.5px;
                z-index: 10;
            }

            /* Ligne de séparation pour Skincare */
            .service-showcase[data-service="skincare"] .service-content-block::after {
                content: '';
                position: absolute;
                top: 22.5%;
                left: 50%;
                transform: translateX(-50%);
                width: 70%;
                height: 1px;
                background: var(--sage-green);
                border-radius: 0.5px;
                z-index: 10;
            }

            /* Ligne de séparation pour Lashlift */
            .service-showcase[data-service="lashlift"] .service-content-block::after {
                content: '';
                position: absolute;
                top: 23.2%;
                left: 50%;
                transform: translateX(-50%);
                width: 70%;
                height: 1px;
                background: var(--sage-green);
                border-radius: 0.5px;
                z-index: 10;
            }

            /* Ligne de séparation pour Massage */
            .service-showcase[data-service="massage"] .service-content-block::after {
                content: '';
                position: absolute;
                top: 26%;
                left: 50%;
                transform: translateX(-50%);
                width: 70%;
                height: 1px;
                background: var(--sage-green);
                border-radius: 0.5px;
                z-index: 10;
            }

            /* Uniformiser tous les titres, descriptions, etc. */
            .service-showcase-title {
                font-size: 2.2rem;
                letter-spacing: 3px;
                text-align: center;
            }

            .service-showcase-tagline {
                font-size: 1.6rem;
                text-align: center;
            }

            .service-showcase-description {
                font-size: 1.05rem;
                text-align: center;
            }

            .service-category {
                text-align: center;
            }

            /* Bénéfices: 2 colonnes pour tous les services */
            .service-benefits-list {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 0.75rem;
            }

            .benefit-pill {
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 0.7rem 0.8rem;
                font-size: 0.65rem;
                flex: 1;
                min-width: auto;
                max-width: none;
                line-height: 1.2;
                min-height: 2.8rem;
                text-align: center;
            }

            .benefit-pill-icon {
                width: 14px;
                height: 14px;
                font-size: 14px;
                margin-right: 0.4rem;
                display: flex;
                align-items: center;
                justify-content: center;
                flex-shrink: 0;
            }

            .benefit-pill span:not(.benefit-pill-icon) {
                display: flex;
                align-items: center;
                justify-content: center;
                text-align: center;
                line-height: 1.2;
            }

            /* CTA Button uniforme */
            .service-cta-button {
                display: block;
                margin: 1.5rem auto 0 auto;
                text-align: center;
                width: 100%;
                max-width: 100%;
                padding: 1.1rem 2.2rem;
                font-size: 1rem;
            }

            /* Hide mobile image on desktop */
            @media (min-width: 769px) {
                .service-mobile-image {
                    display: none;
                }
            }

            /* Services Tabs Responsive */
            .services-tabs-menu {
                top: 1rem;
                left: 50%;
                transform: translateX(-50%);
            }

            .services-tabs-container {
                flex-direction: row;
                gap: 0.3rem;
                padding: 0.5rem;
                max-width: 90vw;
            }

            .service-tab {
                padding: 0.7rem 0.5rem;
                font-size: 0.6rem;
                letter-spacing: 0.2px;
                flex: 1;
                min-width: 0;
                white-space: nowrap;
                text-align: center;
            }

            /* Modal Mobile - Enhanced for Perfect Visibility */
            .modal {
                width: 100vw !important;
                max-width: 100vw !important;
                height: 100vh !important;
                max-height: 100vh !important;
                border-radius: 0 !important;
                margin: 0 !important;
                top: 0 !important;
                left: 0 !important;
                transform: scale(0.7) translateY(80px);
                position: fixed !important;
                z-index: 1000 !important;
                display: flex;
                flex-direction: column;
            }

            .modal-overlay.active .modal {
                transform: scale(1) translateY(0);
            }

            .modal-header {
                padding: 20px 20px 15px;
                position: sticky !important;
                top: 0 !important;
                left: 0 !important;
                right: 0 !important;
                width: 100% !important;
                z-index: 1001 !important;
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(248, 252, 246, 0.96));
                backdrop-filter: blur(30px);
                flex-shrink: 0;
            }

            .modal-title {
                font-size: 1.5rem;
                letter-spacing: 1.5px;
                margin-bottom: 8px;
            }

            .modal-subtitle {
                font-size: 0.85rem;
                line-height: 1.4;
                text-align: center;
            }

            .close-button {
                width: 44px;
                height: 44px;
                top: 15px;
                right: 15px;
                font-size: 28px;
                touch-action: manipulation;
            }

            .modal-content {
                padding: 10px 15px;
                padding-bottom: 20px !important; /* Espace pour navigation fixe */
                overflow-y: auto !important;
                -webkit-overflow-scrolling: touch;
                flex: 1 1 auto;
                min-height: 0;
                position: relative;
            }
            
            .steps-container {
                min-height: auto;
                height: auto;
                position: relative;
            }

            .step-title {
                font-size: 1.3rem;
                margin-bottom: 8px;
                padding: 0 5px;
                line-height: 1.3;
            }

            .progress-steps {
                padding: 10px 12px;
                gap: 10px;
                max-width: 95%;
                margin-left: auto;
                margin-right: auto;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }

            .progress-step {
                font-size: 0.65rem;
                white-space: nowrap;
                flex-shrink: 0;
            }

            .progress-step span {
                display: none;
            }

            /* Add step numbers to progress dots on mobile */
            .progress-dot {
                position: relative;
            }

            .progress-dot::after {
                content: attr(data-step);
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                font-size: 7px;
                font-weight: 700;
                color: white;
                z-index: 2;
                pointer-events: none;
            }

            .progress-dot {
                width: 12px;
                height: 12px;
            }

            .progress-line {
                width: 30px;
                min-width: 30px;
            }

            .progress-steps.four-steps .progress-line {
                width: 20px;
                min-width: 20px;
            }

            .formule-card {
                padding: 18px;
                min-height: auto;
            }

            .card-title {
                font-size: 1.15rem;
                line-height: 1.3;
            }

            .card-description {
                font-size: 0.88rem;
                line-height: 1.5;
            }

            .benefit-item {
                font-size: 0.82rem;
                padding: 4px;
                gap: 8px;
            }

            .benefit-check {
                width: 18px;
                height: 18px;
                font-size: 10px;
            }

            .card-footer {
                margin-top: 15px;
                padding-top: 12px;
            }

            .card-duration {
                font-size: 0.85rem;
                padding: 4px 10px;
            }

            .card-price {
                font-size: 1.1rem;
            }

            .duration-content {
                grid-template-columns: 1fr;
                gap: 10px;
                max-width: 100%;
                padding: 0 5px;
                margin-top: -10px;
            }

            .duration-button {
                padding: 15px 25px;
                width: 100%;
            }

            .duration-main {
                font-size: 1.3rem;
            }

            .duration-sub {
                font-size: 0.9rem;
            }

            .summary-content {
                gap: 20px;
                padding: 10px;
            }

            .summary-card {
                padding: 20px;
                max-width: 100%;
                width: 100%;
                border-radius: 20px;
                min-height: 200px; /* Allonge la carte */
            }

            .summary-item {
                font-size: 0.95rem;
                padding: 12px 0;
                flex-wrap: wrap;
                border-bottom: 1px solid rgba(215, 232, 210, 0.2);
            }

            .summary-item:last-child {
                border-bottom: none;
            }

            .summary-label,
            .summary-value {
                font-size: 0.95rem;
            }

            .summary-item:last-child {
                font-size: 1.3rem;
                padding-top: 12px;
                margin-top: 5px;
            }

            .summary-item:last-child .summary-value {
                font-size: 1.5rem;
            }

            .summary-message-block {
                padding: 20px;
                margin-bottom: 15px;
            }

            .summary-message {
                font-size: 1.4rem;
                line-height: 1.4;
            }
            
            .cta-button {
                padding: 1rem 2.5rem;
                font-size: 0.95rem;
                letter-spacing: 1px;
                border-radius: 50px;
                width: 100%;
                max-width: 320px;
            }

            .modal-navigation {
                padding: 18px 15px 22px 15px;
                flex-direction: row !important;
                gap: 3px;
                min-height: 60px;
                border-top: 1px solid rgba(215, 232, 210, 0.3);
                background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(248, 252, 246, 0.96));
                position: sticky !important;
                left: 0 !important;
                right: 0 !important;
                bottom: 0 !important;
                width: 100% !important;
                z-index: 1002 !important;
                backdrop-filter: blur(30px);
                flex-shrink: 0;
                box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.1);
                position: relative;
            }

            .back-button {
                padding: 12px 18px;
                font-size: 0.8rem;
                flex: none;
                min-width: auto;
                border-radius: 20px;
                letter-spacing: 0.5px;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                position: absolute;
            }

            /* Bouton Précédent grisé sur mobile */
            .back-button.disabled {
                background: rgba(200, 200, 200, 0.2);
                border: 1px solid rgba(180, 180, 180, 0.3);
                color: rgba(120, 120, 120, 0.6);
                cursor: not-allowed;
                pointer-events: none;
            }

            .continue-button {
                padding: 12px 18px;
                font-size: 0.8rem;
                flex: none;
                min-width: auto;
                border-radius: 20px;
                letter-spacing: 0.5px;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                position: absolute;
                right: 15px;
                bottom: 8px;
                width: auto;
            }

            /* Masquer les textes desktop sur mobile */
            .back-text-desktop,
            .continue-text-desktop,
            .cta-button-text-desktop {
                display: none;
            }

            /* Afficher les textes mobile */
            .back-text-mobile,
            .continue-text-mobile,
            .cta-button-text-mobile {
                display: inline;
            }

            .modal-navigation .cta-button {
                margin: 0;
                padding: 12px 16px;
                font-size: 0.7rem;
                letter-spacing: 0px;
                white-space: nowrap;
                flex: none;
                min-width: auto;
                max-width: none;
                overflow: hidden;
                text-overflow: ellipsis;
                position: absolute;
                right: 15px;
                bottom: 8px;
                width: auto;
            }

            .cta-button-text {
                font-size: 0.75rem;
            }
            
            .formula-type-grid {
                grid-template-columns: 1fr;
                gap: 15px;
                max-width: none;
                padding: 0 10px;
            }




            .details-content {
                min-height: auto;
                margin-top: 5px;
                padding: 0 5px;
                display: flex;
                justify-content: center;
                align-items: flex-start;
            }

            .details-card {
                padding: 15px;
                max-width: 100%;
                border-radius: 20px;
                width: 100%;
            }

            .details-header {
                margin-bottom: 15px;
                padding-bottom: 10px;
                flex-direction: column;
                align-items: flex-start;
                display: flex; /* Assure que flexbox est activé */
            }

            .details-header h4 {
                font-size: 1.4rem;
                line-height: 1.3;
                margin-bottom: 10px;
            }

            .details-info {
                flex-direction: row-reverse; /* Intervertir l'ordre : prix à gauche, durée à droite */
                align-items: center;
                gap: 10px;
                width: 100%;
                justify-content: space-between;
            }

            .details-duration {
                font-size: 0.9rem;
                padding: 5px 12px;
            }

            .details-price {
                font-size: 1.3rem;
            }

            .details-description {
                margin-bottom: 20px;
            }

            .details-description p {
                font-size: 0.95rem;
                line-height: 1.6;
            }

            .details-benefits h5 {
                font-size: 1.1rem;
                margin-bottom: 15px;
            }

            .details-benefits li {
                font-size: 0.9rem;
                padding: 6px 0;
                padding-left: 20px;
            }

            .details-benefits li::before {
                font-size: 0.8rem;
                top: 6px;
            }

            /* Improve touch targets */
            .formule-card,
            .duration-button,
            .formula-type-card {
                min-height: 44px;
                touch-action: manipulation;
            }

            /* Improve scrollbar on mobile */
            .modal-content::-webkit-scrollbar {
                width: 4px;
            }

            .modal-content::-webkit-scrollbar-track {
                background: rgba(215, 232, 210, 0.1);
            }

            .modal-content::-webkit-scrollbar-thumb {
                background: rgba(175, 207, 186, 0.5);
                border-radius: 4px;
            }

            /* Prevent zoom on input focus */
            input, select, textarea {
                font-size: 16px !important;
            }
        }

        /* Scrollbar Styling - Modal specific */
        .modal-content::-webkit-scrollbar {
            width: 12px;
        }

        .modal-content::-webkit-scrollbar-track {
            background: rgba(215, 232, 210, 0.15);
            border-radius: 10px;
            border: 1px solid rgba(215, 232, 210, 0.2);
        }

        .modal-content::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, var(--sage-green), #a8b89a);
            border-radius: 10px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .modal-content::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #8a9a7a, #9ca88a);
            border: 2px solid rgba(255, 255, 255, 0.5);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .modal-content::-webkit-scrollbar-thumb:active {
            background: linear-gradient(135deg, #7a8a6a, #8a987a);
        }

        /* Firefox scrollbar styling */
        .modal-content {
            scrollbar-width: thin;
            scrollbar-color: var(--sage-green) rgba(215, 232, 210, 0.15);
        }

        /* ============================================
           MODAL DE REDIRECTION GLASSMORPHISM
           ============================================ */
        .redirect-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .redirect-modal.show {
            opacity: 1;
        }

        .redirect-modal-content {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(255, 255, 255, 0.1);
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .redirect-modal.show .redirect-modal-content {
            transform: scale(1);
        }

        .redirect-icon {
            margin-bottom: 20px;
        }

        .redirect-arrow {
            width: 60px;
            height: 60px;
            color: var(--sage-green);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        /* Scroll to Top Button */
        .scroll-to-top {
            position: fixed;
            bottom: 12.7rem;
            left: 2rem;
            width: 50px;
            height: 50px;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(175, 207, 186, 0.2);
            border-radius: 50%;
            color: var(--sage-green);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            z-index: 1500;
            box-shadow: 0 8px 20px rgba(175, 207, 186, 0.2);
        }

        .scroll-to-top.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .scroll-to-top:hover {
            transform: translateY(-5px) scale(1.1);
            background: rgba(255, 255, 255, 0.95);
            border-color: rgba(175, 207, 186, 0.3);
            box-shadow: 0 12px 30px rgba(175, 207, 186, 0.3);
        }

        .scroll-to-top svg {
            width: 24px;
            height: 24px;
        }

        /* ===========================================
           ZEN SCROLL PROGRESS BAR - CSS
           =========================================== */

        /* Zen Scroll Progress Bar */
        .zen-scroll-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 6px;
            z-index: 9999;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            overflow: hidden;
            border-bottom: 1px solid rgba(175, 207, 186, 0.1);
        }

        .progress-fill-zen {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, 
                rgba(175, 207, 186, 0.6) 0%, 
                rgba(175, 207, 186, 0.8) 30%,
                var(--sage-green) 60%,
                rgba(175, 207, 186, 1) 90%,
                rgba(220, 205, 220, 0.8) 100%);
            transition: width 0.1s ease-out;
            position: relative;
            box-shadow: 
                0 0 20px rgba(175, 207, 186, 0.3),
                0 2px 10px rgba(175, 207, 186, 0.2),
                0 4px 15px rgba(175, 207, 186, 0.4);
        }

        /* Sparkle effect on progress */
        .progress-fill-zen::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.4), 
                transparent);
            animation: progressShimmer 3s ease-in-out infinite;
        }

        @keyframes progressShimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(200%); }
        }

        /* Floating butterfly on progress bar */
        .progress-butterfly {
            position: absolute;
            top: 50%;
            right: -15px;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            background-image: url('logos/Frame1.svg');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            opacity: 0.8;
            transition: all 0.3s ease;
            animation: butterflyWings 2s ease-in-out infinite;
            filter: drop-shadow(0 2px 8px rgba(175, 207, 186, 0.4));
        }

        .progress-fill-zen:hover .progress-butterfly {
            opacity: 1;
            transform: translateY(-50%) scale(1.2);
        }

        /* Zen particles following progress */
        .zen-particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .zen-particle {
            position: absolute;
            width: 2px;
            height: 2px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            animation: zenParticleFloat 4s linear infinite;
        }

        @keyframes zenParticleFloat {
            0% {
                transform: translateY(0) scale(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
                transform: translateY(-2px) scale(1);
            }
            90% {
                opacity: 1;
                transform: translateY(-4px) scale(1);
            }
            100% {
                transform: translateY(-6px) scale(0);
                opacity: 0;
            }
        }

        .redirect-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--pure-white);
            margin-bottom: 15px;
            font-family: 'Inter', sans-serif;
        }

        .redirect-message {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 25px;
            line-height: 1.5;
        }

        .redirect-countdown {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--pure-white);
            background: rgba(175, 207, 186, 0.3);
            border-radius: 50px;
            padding: 10px 20px;
            display: inline-block;
            border: 1px solid rgba(175, 207, 186, 0.5);
        }

        #countdown {
            font-size: 1.4rem;
            font-weight: 700;
        }

        /* Responsive pour le modal de redirection */
        @media (max-width: 768px) {
            .redirect-modal-content {
                padding: 30px 20px;
                max-width: 350px;
            }

            .redirect-arrow {
                width: 50px;
                height: 50px;
            }

            .scroll-to-top {
                width: 45px;
                height: 45px;
                bottom: 11.5rem;
                left: 2.1rem;
            }

            .zen-scroll-progress {
                height: 4px;
            }
            
            .progress-butterfly {
                width: 16px;
                height: 16px;
                right: -12px;
            }

            .redirect-title {
                font-size: 1.3rem;
            }

            .redirect-message {
                font-size: 0.95rem;
            }
        }

        /* Lucide Icons Styling */
        .badge-icon {
            width: 16px;
            height: 16px;
            margin-right: 6px;
            vertical-align: middle;
        }

        .benefit-pill-icon i {
            width: 18px;
            height: 18px;
            vertical-align: middle;
        }

        .type-icon i {
            width: 24px;
            height: 24px;
            vertical-align: middle;
        }

        /* Timeline Section - Le déroulement d'un soin */
        .timeline-section {
            padding: 10rem 2rem;
            background: white;
            position: relative;
        }

        .timeline-container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .timeline {
            position: relative;
            padding-left: 80px;
        }

        .timeline-line {
            position: absolute;
            left: 30px;
            top: 0;
            width: 2px;
            height: 0;
            background: linear-gradient(to bottom, var(--sage-green), #90b386);
            transition: height 1s ease;
        }

        .timeline-line.visible {
            height: 100%;
        }

        .timeline-item {
            position: relative;
            padding: 3rem 0;
            opacity: 0;
            transform: translateX(-50px);
            transition: all 0.8s ease;
        }

        .timeline-item.visible {
            opacity: 1;
            transform: translateX(0);
        }

        .timeline-dot {
            position: absolute;
            left: -50px;
            top: 3.5rem;
            width: 20px;
            height: 20px;
            background: white;
            border: 4px solid var(--sage-green);
            border-radius: 50%;
            z-index: 2;
            animation: pulseDot 2s ease-in-out infinite;
        }

        @keyframes pulseDot {
            0%, 100% { box-shadow: 0 0 0 0 rgba(175, 207, 186, 0.7); }
            50% { box-shadow: 0 0 0 15px rgba(175, 207, 186, 0); }
        }

        .timeline-content {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(245, 249, 243, 0.95) 100%);
            padding: 2.5rem;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
        }

        .timeline-step {
            font-size: 0.9rem;
            color: var(--sage-green);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 0.5rem;
        }

        .timeline-title {
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--dark-green);
            margin-bottom: 1rem;
        }

        .timeline-description {
            color: var(--text-light);
            line-height: 1.8;
        }

        .section-header {
            text-align: center;
            margin-bottom: 5rem;
            opacity: 1;
            transform: translateY(0);
            transition: all 0.8s ease;
        }

        .section-header.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .section-title {
            font-family: 'Inter', sans-serif;
            font-size: 3rem;
            font-weight: 300;
            color: var(--dark-green);
            margin-bottom: 1rem;
            text-transform: lowercase;
            font-variant: small-caps;
            letter-spacing: 2px;
            position: relative;
            display: inline-block;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--sage-green), transparent);
        }

        .section-subtitle {
            font-size: 1.2rem;
            color: var(--text-light);
            font-style: italic;
            margin-top: 1rem;
        }

        /* Timeline Responsive */
        @media (max-width: 768px) {
            .timeline-section {
                padding: 6rem 1rem;
            }

            .timeline {
                padding-left: 60px;
            }

            .timeline-dot {
                left: -40px;
            }

            .section-title {
                font-size: 2rem;
            }
        }

        /* Tablet (769px-1024px) */
        @media (min-width: 769px) and (max-width: 1024px) {
            .section-title {
                font-size: 2.5rem;
            }
        }

        /* Desktop (1025px-1440px) */
        @media (min-width: 1025px) and (max-width: 1440px) {
            .section-title {
                font-size: 3rem;
            }
        }

        /* Large Desktop (1441px+) */
        @media (min-width: 1441px) {
            .section-title {
                font-size: 3.25rem;
            }
        }

        /* Comparison Section - Résultats Visibles */
        .comparison-section {
            padding: 10rem 2rem;
            background: linear-gradient(135deg, #fafcfb 0%, #f0f5f2 100%);
        }

        .comparison-container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .comparison-slider {
            position: relative;
            height: 600px;
            border-radius: 25px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
            border: none;
            transform: scale(0.8);
            opacity: 0;
            transition: transform 1s cubic-bezier(0.25, 0.46, 0.45, 0.94), 
                       opacity 0.8s ease-out;
        }

        .comparison-slider.animate-in {
            transform: scale(1);
            opacity: 1;
        }

        .comparison-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            border: none;
            outline: none;
        }

        .comparison-after {
            clip-path: inset(0 50% 0 0);
        }

        .comparison-divider {
            position: absolute;
            top: 0;
            left: 50%;
            width: 4px;
            height: 100%;
            background: white;
            transform: translateX(-50%);
            cursor: ew-resize !important;
            z-index: 10;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
            pointer-events: auto;
        }

        .comparison-handle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: grab !important;
            user-select: none;
            pointer-events: auto;
            animation: handlePulse 2s ease-in-out infinite;
        }

        .comparison-handle:active {
            cursor: grabbing !important;
        }

        .comparison-handle:hover {
            cursor: grab !important;
        }

        @keyframes handlePulse {
            0%, 100% { box-shadow: 0 0 30px rgba(168, 198, 159, 0.5); }
            50% { box-shadow: 0 0 50px rgba(168, 198, 159, 0.8); }
        }

        .comparison-label {
            position: absolute;
            top: 2rem;
            background: rgba(255, 255, 255, 0.95);
            padding: 0.75rem 1.5rem;
            border-radius: 50px;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }

        .label-before {
            left: 2rem;
            color: var(--text-dark);
        }

        .label-after {
            right: 2rem;
            color: var(--sage-green);
        }


        /* Comparison Responsive */
        @media (max-width: 768px) {
            .comparison-section {
                padding: 6rem 1rem;
            }

            .comparison-slider {
                height: 400px;
            }

            .comparison-handle {
                width: 50px;
                height: 50px;
            }

            .comparison-label {
                top: 1rem;
                padding: 0.5rem 1rem;
                font-size: 0.8rem;
            }

            .label-before {
                left: 1rem;
            }

            .label-after {
                right: 1rem;
            }
        }

        /* Footer Styles */
        .footer {
            background: linear-gradient(135deg, var(--dark-green) 0%, var(--sage-green) 100%);
            color: var(--pure-white);
            padding: 3rem 2rem 1rem;
            text-align: center;
            position: relative;
        }

        .footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(175, 207, 186, 0.5), transparent);
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-section h3 {
			font-family: 'Inter', sans-serif;
			font-size: 1.5rem;
			font-weight: 300;
			margin-bottom: 1rem;
			color: var(--sage-green);
			text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
			text-transform: lowercase;
			font-variant: small-caps;
			letter-spacing: 2px;
		}

        .footer-section p, .footer-section a {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            line-height: 1.6;
            transition: color 0.3s ease;
        }

        .footer-section a:hover {
            color: var(--sage-green);
            text-shadow: 0 1px 5px rgba(175, 207, 186, 0.5);
        }

        .footer-bottom {
            border-top: 1px solid rgba(175, 207, 186, 0.2);
            padding-top: 1rem;
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
        }

        .social-links {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
            justify-content: center;
        }

        .social-link {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            color: var(--pure-white);
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .social-link:hover {
            background: rgba(175, 207, 186, 0.2);
            transform: translateY(-2px);
        }

        .footer-links {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            font-size: 0.9rem;
            transition: color 0.3s ease;
        }

        .footer-links a:hover {
            color: var(--sage-green);
        }

        .footer-separator {
            color: rgba(255, 255, 255, 0.4);
            font-size: 0.9rem;
        }


        @media (max-width: 768px) {
            .footer {
                padding: 2rem 1rem 1rem;
            }

            .footer-content {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .footer-section h3 {
                font-size: 1.2rem;
            }

            .footer-section a,
            .footer-section p {
                font-size: 0.9rem;
            }

            .footer-links {
                flex-direction: column;
                gap: 0.5rem;
            }

            .footer-separator {
                display: none;
            }
        }
    </style>
</head>
<body>
    <!-- Zen Scroll Progress Bar -->
    <div class="zen-scroll-progress">
        <div class="progress-fill-zen">
            <div class="progress-butterfly"></div>
            <div class="progress-glow-zen"></div>
            <div class="zen-particles"></div>
        </div>
    </div>

    <div class="floating-menu-trigger" id="menuTrigger">
        <img src="logos/Frame1.svg" alt="Menu" class="trigger-butterfly" style="transform: scaleX(1);">
        <div class="trigger-pulse"></div>
    </div>

    <div class="portal-menu" id="portalMenu">
        <div class="portal-background">
            <div class="portal-glow"></div>
            <div class="portal-particles">
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
            </div>
        </div>
        <button class="close-portal-btn" id="closePortal">
            <span></span>
            <span></span>
        </button>
        <div class="portal-content">
            <div class="portal-title">Navigation</div>
            <nav class="portal-nav">
                <a href="index.html" class="portal-link" data-delay="0">
                    <span class="link-text">Accueil</span>
                    <div class="link-underline"></div>
                </a>
                <a href="histoire.html" class="portal-link" data-delay="1">
                    <span class="link-text">Notre Histoire</span>
                    <div class="link-underline"></div>
                </a>
                <a href="#prestations" class="portal-link" data-delay="2">
                    <span class="link-text">Prestations</span>
                    <div class="link-underline"></div>
                </a>
                <a href="reservation.html" class="portal-link reservation-highlight" data-delay="3">
                    <span class="link-text">Réservation</span>
                    <div class="link-underline"></div>
                </a>
            </nav>
        </div>
    </div>

    <section class="hero" id="prestations">
        <div class="floating-particles">
            <div class="particle" style="top: 20%; left: 10%;"></div>
            <div class="particle" style="top: 60%; right: 15%;"></div>
            <div class="particle" style="bottom: 30%; left: 20%;"></div>
            <div class="particle" style="top: 40%; right: 25%;"></div>
            <div class="particle" style="bottom: 20%; right: 30%;"></div>
        </div>
        <div class="hero-content">
            <h1 class="hero-title">Nos Prestations</h1>
            <p class="hero-subtitle">Des rituels sur-mesure inspirés du soin coréen</p>
        </div>
        <div class="scroll-indicator">
            <div class="scroll-dots">
                <div class="scroll-dot"></div>
                <div class="scroll-dot"></div>
                <div class="scroll-dot"></div>
            </div>
        </div>
    </section>

    <!-- Timeline Section - Le déroulement d'un soin -->
    <section class="timeline-section">
        <div class="timeline-container">
            <div class="section-header" id="timelineHeader">
                <h2 class="section-title">Le déroulement d'un soin</h2>
                <p class="section-subtitle">Chaque étape pensée pour votre bien-être</p>
            </div>

            <div class="timeline">
                <div class="timeline-line" id="timelineLine"></div>

                <div class="timeline-item" data-timeline="1">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <div class="timeline-step">Étape 1</div>
                        <h3 class="timeline-title">Accueil & Diagnostic Sensoriel</h3>
                        <p class="timeline-description">Dès votre arrivée, un rituel d'accueil vous invite à ralentir. Autour d'une tisane infusée de sérénité, nous prenons le temps d'écouter, d'observer et de comprendre votre peau, votre état du moment, vos besoins profonds. Ce diagnostic personnalisé est la première étape d'un soin sur mesure, guidé par l'expertise et l'intuition.</p>
                    </div>
                </div>

                <div class="timeline-item" data-timeline="2">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <div class="timeline-step">Étape 2</div>
                        <h3 class="timeline-title">Préparation & Détente</h3>
                        <p class="timeline-description">Le corps se relâche, l'esprit s'apaise. Dans une lumière tamisée et une atmosphère parfumée aux notes apaisantes, vous êtes enveloppée dans une bulle de calme. Chaque détail — musique, arôme, souffle — prépare votre être à recevoir pleinement le soin.</p>
                    </div>
                </div>

                <div class="timeline-item" data-timeline="3">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <div class="timeline-step">Étape 3</div>
                        <h3 class="timeline-title">Le Rituel du Soin</h3>
                        <p class="timeline-description">Le geste devient langage. Nos techniques expertes, inspirées des rituels coréens et des arts du toucher, s'adaptent à votre peau et à votre énergie du moment. Chaque mouvement réveille la vitalité, apaise les tensions et révèle l'éclat naturel du visage ou du cuir chevelu.</p>
                    </div>
                </div>

                <div class="timeline-item" data-timeline="4">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <div class="timeline-step">Étape 4</div>
                        <h3 class="timeline-title">L'Instant Suspendu</h3>
                        <p class="timeline-description">Le soin s'achève, mais le voyage se prolonge. Un moment de repos, lovée dans la douceur, pour laisser le corps intégrer les bienfaits du soin. Un thé délicat, une respiration lente, une bulle hors du temps.</p>
                    </div>
                </div>

                <div class="timeline-item" data-timeline="5">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                        <div class="timeline-step">Étape 5</div>
                        <h3 class="timeline-title">Conseils & Rituels Personnalisés</h3>
                        <p class="timeline-description">Nous clôturons ce moment avec un accompagnement sur mesure. Des conseils doux et précis, des rituels à reproduire chez vous, pour prolonger l'équilibre et la beauté révélée. Car la magie Dream Skin ne s'arrête pas ici — elle continue à fleurir, chaque jour, en vous.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="services-master-container">
        <div class="section-header">
            <h2 class="section-title">Prestations</h2>
            <p class="section-subtitle">Découvrez nos soins sur-mesure pour votre bien-être</p>
        </div>

        <!-- Services Tabs Menu -->
        <div class="services-tabs-menu">
            <div class="services-tabs-container">
                <button class="service-tab active" data-service="head-spa">
                    <span>Head Spa</span>
                </button>
                <button class="service-tab" data-service="massage">
                    <span>Massage</span>
                </button>
                <button class="service-tab" data-service="skincare">
                    <span>Skincare</span>
                </button>
                <button class="service-tab" data-service="lashlift">
                    <span>Lashlift</span>
                </button>
            </div>
        </div>
        
        <div class="services-grid-wrapper">
            <!-- Head Spa Section -->
            <section id="head-spa-section" class="service-section">
                <div class="service-showcase" data-service="head-spa">
                <div class="service-visual">
                    <div class="service-visual-bg">
                        <img src="images/headspa_korean.svg" alt="Head Spa" class="service-visual-icon">
                    </div>
                    <div class="service-visual-badge visual-badge-recommended">
                        <i data-lucide="award" class="badge-icon"></i> Signature
                    </div>
                </div>

                <div class="service-content-block">
                    <div class="service-category">Détente & Soin Capillaire</div>
                    <h2 class="service-showcase-title">Head Spa</h2>
                    <div class="service-mobile-image" style="background-image: url('images/headspa_korean.svg');"></div>
                    <div class="service-showcase-description">
                        <p>Plongez dans un véritable rituel de bien-être où l'eau et la nature s'unissent pour éveiller vos sens.</p>
                        
                        <p>Notre Head Spa associe massage du cuir chevelu, aromathérapie et soins capillaires d'exception à base d'huiles et de produits 100% naturels, fabriqués en France.</p>
                        
                        <p>Un moment unique pour apaiser les tensions, nourrir vos cheveux en profondeur et stimuler la circulation tout en vous offrant une détente absolue.</p>
                        
                        <p>Découvrez nos rituels aquatiques sur-mesure et laissez-vous emporter par l'art du bien-être capillaire.</p>
                    </div>

                    <div class="service-benefits-list">
                        <div class="benefit-pill">
                            <span class="benefit-pill-icon"><i data-lucide="droplets"></i></span>
                            <span>Massage aquatique</span>
                        </div>
                        <div class="benefit-pill">
                            <span class="benefit-pill-icon"><i data-lucide="leaf"></i></span>
                            <span>Aromathérapie</span>
                        </div>
                        <div class="benefit-pill">
                            <span class="benefit-pill-icon"><i data-lucide="sparkles"></i></span>
                            <span>Soins capillaires</span>
                        </div>
                        <div class="benefit-pill">
                            <span class="benefit-pill-icon"><i data-lucide="zap"></i></span>
                            <span>Détente profonde</span>
                        </div>
                    </div>

                    <button class="service-cta-button" onclick="openModalHeadSpa()">
                        <span class="service-cta-text">Découvrir les formules</span>
                    </button>
                </div>
            </div>
            </section>

            <!-- Massage Section -->
            <section id="massage-section" class="service-section">
                <div class="service-showcase" data-service="massage">
                <div class="service-visual">
                    <div class="service-visual-bg">
                        <img src="images/massage.svg" alt="Massage" class="service-visual-icon">
                    </div>
                    <div class="service-visual-badge visual-badge-recommended">
                        <i data-lucide="star" class="badge-icon"></i> Recommandé
                    </div>
                </div>

                <div class="service-content-block">
                    <div class="service-category">Bien-être & Relaxation</div>
                    <h2 class="service-showcase-title">Massage</h2>
                    <div class="service-mobile-image" style="background-image: url('images/massage.svg');"></div>
                    <div class="service-showcase-description">
                        <p>Offrez à votre corps une parenthèse de sérénité sur mesure.</p>
                        
                        <p>Nos massages libèrent les tensions, apaisent l'esprit et rééquilibrent l'énergie.</p>
                        
                        <p>Avec notre bar à huiles naturelles 100% françaises, choisissez la synergie adaptée à vos besoins : détente, vitalité, apaisement ou énergie.</p>
                        
                        <p>Un moment unique, pensé pour vous et vos émotions.</p>
                        
                        <p>Découvrez nos techniques ancestrales sur-mesure et laissez-vous transporter par l'art du toucher thérapeutique.</p>
                    </div>

                    <div class="service-benefits-list">
                        <div class="benefit-pill">
                            <span class="benefit-pill-icon"><i data-lucide="hand"></i></span>
                            <span>Techniques ancestrales</span>
                        </div>
                        <div class="benefit-pill">
                            <span class="benefit-pill-icon"><i data-lucide="leaf"></i></span>
                            <span>Huiles essentielles</span>
                        </div>
                        <div class="benefit-pill">
                            <span class="benefit-pill-icon"><i data-lucide="zap"></i></span>
                            <span>Équilibre énergétique</span>
                        </div>
                        <div class="benefit-pill">
                            <span class="benefit-pill-icon"><i data-lucide="heart"></i></span>
                            <span>Relâchement total</span>
                        </div>
                    </div>

                    <button class="service-cta-button" onclick="openModalMassage()">
                        <span class="service-cta-text">Découvrir les formules</span>
                    </button>
                </div>
            </div>
            </section>

            <!-- Skincare Section -->
            <section id="skincare-section" class="service-section">
                <div class="service-showcase" data-service="skincare">
                <div class="service-visual">
                    <div class="service-visual-bg">
                        <img src="images/skincare-kbeauty.svg" alt="Skincare Coréenne" class="service-visual-icon">
                    </div>
                    <div class="service-visual-badge visual-badge-recommended">
                        <i data-lucide="flower" class="badge-icon"></i> K-Beauty
                    </div>
                </div>

                <div class="service-content-block">
                    <div class="service-category">Soins du Visage</div>
                    <h2 class="service-showcase-title">Skincare</h2>
                    <div class="service-mobile-image" style="background-image: url('images/skincare-kbeauty.svg');"></div>
                    <div class="service-showcase-description">
                        <p>Nous avons choisis de collaborer avec les produits de la marque JeuDérm 100% conçus et fabriqués en Corée.</p>
                        
                        <p>Ces soins brevetés sont le fruit d'années de recherche scientifique et sont régulièrement utilisés par des dermatologues et des professionnels de santé.</p>
                        
                        <p>La marque allie innovation médicale et tradition coréenne : des formules efficaces, sûres, adaptées à tous les types de peaux et pensées pour offrir des résultats visibles, durables et respectueux de l'épiderme.</p>
                        
                        <p>Découvrez nos formules sur-mesure et laissez-vous transporter par l'excellence de la K-Beauty.</p>
                    </div>

                    <div class="service-benefits-list">
                        <div class="benefit-pill">
                            <span class="benefit-pill-icon"><i data-lucide="flower"></i></span>
                            <span>Rituels K-Beauty</span>
                        </div>
                        <div class="benefit-pill">
                            <span class="benefit-pill-icon"><i data-lucide="gem"></i></span>
                            <span>Actifs naturels</span>
                        </div>
                        <div class="benefit-pill">
                            <span class="benefit-pill-icon"><i data-lucide="layers"></i></span>
                            <span>Multi-étapes</span>
                        </div>
                        <div class="benefit-pill">
                            <span class="benefit-pill-icon"><i data-lucide="leaf"></i></span>
                            <span>Équilibre peau</span>
                        </div>
                    </div>

                    <button class="service-cta-button" onclick="openModalSkincare()">
                        <span class="service-cta-text">Découvrir les formules</span>
                    </button>
                </div>
            </div>
            </section>

            <!-- Lashlift Section -->
            <section id="lashlift-section" class="service-section">
                <div class="service-showcase" data-service="lashlift">
                <div class="service-visual">
                    <div class="service-visual-bg">
                        <img src="images/lashlift.jpg" alt="Lashlift" class="service-visual-icon">
                    </div>
                    <div class="service-visual-badge visual-badge-recommended">
                        <i data-lucide="eye" class="badge-icon"></i> Beauté du regard
                    </div>
                </div>

                <div class="service-content-block">
                    <div class="service-category">Beauté & Esthétique</div>
                    <h2 class="service-showcase-title">Lashlift</h2>
                    <div class="service-mobile-image" style="background-image: url('images/lashlift.jpg');"></div>
                    <div class="service-showcase-description">
                        <p>Sublimez votre regard en toute confiance.</p>
                        
                        <p>Notre rehaussement de cils révèle la beauté naturelle de vos yeux en offrant une courbure élégante et durable, sans extensions.</p>
                        
                        <p>Tous nos produits sont hypoallergéniques et conformes à la norme européenne, pour garantir un soin à la fois efficace, doux et respectueux de vos cils.</p>
                        
                        <p>Un regard lumineux, naturellement mis en valeur.</p>
                        
                        <p>Découvrez nos techniques de réhaussement sur-mesure et laissez-vous séduire par l'art de la beauté du regard.</p>
                    </div>
                    
                    <div class="service-benefits-list">
                        <div class="benefit-pill">
                            <span class="benefit-pill-icon"><i data-lucide="sparkles"></i></span>
                            <span>Réhaussement naturel</span>
                        </div>
                        <div class="benefit-pill">
                            <span class="benefit-pill-icon"><i data-lucide="clock"></i></span>
                            <span>Résultat durable</span>
                        </div>
                        <div class="benefit-pill">
                            <span class="benefit-pill-icon"><i data-lucide="heart"></i></span>
                            <span>Regard magnétique</span>
                        </div>
                        <div class="benefit-pill">
                            <span class="benefit-pill-icon"><i data-lucide="star"></i></span>
                            <span>Effet immédiat</span>
                        </div>
                    </div>

                    <button class="service-cta-button" onclick="openModalLashlift()">
                        <span class="service-cta-text">Découvrir les formules</span>
                    </button>
                </div>
            </div>
            </section>

        </div>
    </div>

    <div class="modal-overlay" id="modalOverlay">
        <div class="modal" id="modal">
            <div class="modal-header">
                <h2 class="modal-title" id="modalServiceTitle">Head Spa</h2>
                <p class="modal-subtitle">Votre expérience bien-être sur mesure</p>
                <button class="close-button" onclick="closeModal()">&times;</button>

                <div class="progress-steps four-steps" id="progressSteps3">
                    <div class="progress-step active" id="progressStep1">
                        <div class="progress-dot"></div>
                        <span>Formule</span>
                    </div>
                    <div class="progress-line" id="progressLine1"></div>
                    <div class="progress-step" id="progressStep2">
                        <div class="progress-dot"></div>
                        <span>Durée</span>
                    </div>
                    <div class="progress-line" id="progressLine2"></div>
                    <div class="progress-step" id="progressStep3">
                        <div class="progress-dot"></div>
                        <span>Détails</span>
                    </div>
                    <div class="progress-line" id="progressLine3"></div>
                    <div class="progress-step" id="progressStep4">
                        <div class="progress-dot"></div>
                        <span>Réservation</span>
                    </div>
                </div>
                
                <div class="progress-steps four-steps" id="progressSteps4" style="display: none;">
                    <div class="progress-step active" id="progressStep0">
                        <div class="progress-dot"></div>
                        <span>Type</span>
                    </div>
                    <div class="progress-line" id="progressLine0"></div>
                    <div class="progress-step" id="progressStep1-sk">
                        <div class="progress-dot"></div>
                        <span>Formule</span>
                    </div>
                    <div class="progress-line" id="progressLine1-sk"></div>
                    <div class="progress-step" id="progressStep2-sk">
                        <div class="progress-dot"></div>
                        <span>Détails</span>
                    </div>
                    <div class="progress-line" id="progressLine2-sk"></div>
                    <div class="progress-step" id="progressStep3-sk">
                        <div class="progress-dot"></div>
                        <span>Réservation</span>
                    </div>
                </div>
            </div>

            <div class="modal-content">
                <div class="steps-container" id="stepsContainer">
                    
                    <div class="step" id="step0">
                        <h3 class="step-title">Sélectionnez le type de soin</h3>
                        <!-- Skincare Type Cards -->
                        <div class="formula-type-grid" id="skincareTypeCards">
                            <div class="formula-type-card" onclick="selectFormulaType('soins-specialises', 'Soins spécialisés', 'shield', this)">
                                <span class="type-icon"><i data-lucide="shield"></i></span>
                                <h4 class="type-title">Soins spécialisés</h4>
                                <p class="type-description">Solutions ciblées pour les imperfections et problèmes cutanés.</p>
                            </div>
                            <div class="formula-type-card" onclick="selectFormulaType('anti-age', 'Anti-Âge', 'clock', this)">
                                <span class="type-icon"><i data-lucide="clock"></i></span>
                                <h4 class="type-title">Anti-Âge</h4>
                                <p class="type-description">Techniques avancées pour préserver la jeunesse de votre peau.</p>
                            </div>
                            <div class="formula-type-card" onclick="selectFormulaType('regeneration', 'Régénération', 'droplets', this)">
                                <span class="type-icon"><i data-lucide="droplets"></i></span>
                                <h4 class="type-title">Régénération</h4>
                                <p class="type-description">Soins intensifs pour restaurer et hydrater en profondeur.</p>
                            </div>
                            <div class="formula-type-card" onclick="selectFormulaType('korean-glow', 'Korean Glow', 'sparkles', this)">
                                <span class="type-icon"><i data-lucide="sparkles"></i></span>
                                <h4 class="type-title">Korean Glow</h4>
                                <p class="type-description">Révélez l'éclat naturel de votre peau avec nos soins lumineux.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="step active" id="step1">
                        <h3 class="step-title">Choisissez votre formule</h3>
                        <!-- Head Spa Cards -->
                        <div class="formule-cards" id="headSpaCards">
                            <div class="formule-card" data-service="head-spa" onclick="selectFormule('chogak', 60, 'CHOGAK - L\'ÉCLAT', '30 min')">
                                <h4 class="card-title">CHOGAK - L'ÉCLAT</h4>
                                <p class="card-description">Un shot de lumière pour vos cheveux.</p>
                                <div class="card-benefits">
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Détente express</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Cuir chevelu apaisé & oxygéné</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Cheveux doux et légers</span>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <div class="card-duration">30 min</div>
                                    <div class="card-price">60€</div>
                                </div>
                            </div>

                            <div class="formule-card" data-service="head-spa" onclick="selectFormule('bom', 100, 'BOM - LE PRINTEMPS', '60 min')">
                                <h4 class="card-title">BOM - LE PRINTEMPS</h4>
                                <p class="card-description">Une parenthèse florale qui redonne souplesse et vitalité.</p>
                                <div class="card-benefits">
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Purification à la vapeur</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Cuir chevelu hydraté intensément</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Cheveux brillants, souples et nourris</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Massage relaxant & revitalisant</span>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <div class="card-duration">60 min</div>
                                    <div class="card-price">100€</div>
                                </div>
                            </div>

                            <div class="formule-card" data-service="head-spa" onclick="selectFormule('haneul', 120, 'HANEUL - LE CIEL', '75 min')">
                                <h4 class="card-title">HANEUL - LE CIEL</h4>
                                <p class="card-description">Un voyage aérien entre soin et détente.<br>Laissez-vous porter par la douceur des gestes.</p>
                                <div class="card-benefits">
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Diagnostic sur mesure pour un soin ciblé</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Purification & régénération du cuir chevelu</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Massage profond </span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Cheveux fortifiés et éclatants de santé</span>
                                    </div>
                                    
                                </div>
                                <div class="card-footer">
                                    <div class="card-duration">75 min</div>
                                    <div class="card-price">120€</div>
                                </div>
                            </div>

                            <div class="formule-card" data-service="head-spa" onclick="selectFormule('headdream', 150, 'HEAD DREAM - L\'EXPÉRIENCE ULTIME', '90 min')">
                                <h4 class="card-title">HEAD DREAM - L'EXPÉRIENCE ULTIME</h4>
                                <p class="card-description">Notre soin signature, pensé comme un rêve éveillé. </p>
                                <div class="card-benefits">
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Diagnostic complet</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Détox et revitalisation profonde</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Massage premium</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Cheveux sublimés</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Cuir chevelu rééquilibré</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Expérience sensorielle</span>
                                    </div>
                                    
                                </div>
                                <div class="card-footer">
                                    <div class="card-duration">90 min</div>
                                    <div class="card-price">150€</div>
                                </div>
                            </div>
                        </div>

                        <!-- Massage Cards -->
                        <div class="formule-cards" id="massageCards" style="display: none;">
                            <div class="formule-card" data-service="massage" onclick="selectFormule('calypsia', 49, 'CALYPSIA - Lâcher prise absolu', '30 min')">
                                <h4 class="card-title">CALYPSIA</h4>
                                <p class="card-description">Plongez dans une vague de douceur, où chaque geste efface vos tensions et réveille vos sens.</p>
                                <div class="card-benefits">
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Relaxation profonde du corps et de l'esprit</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Libération des tensions accumulées</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Harmonie retrouvée entre corps et émotions</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Sensation de légèreté et de bien-être global</span>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <div class="card-duration">30-90 min</div>
                                    <div class="card-price">À partir de 49€</div>
                                </div>
                            </div>

                            <div class="formule-card" data-service="massage" onclick="selectFormule('pyrhiia', 59, 'PYRHIIA - Pierres chaudes', '30 min')">
                                <h4 class="card-title">PYRHIIA</h4>
                                <p class="card-description">Laissez la chaleur des pierres et la fluidité des gestes fusionner pour apaiser vos tensions et réchauffer votre âme.</p>
                                <div class="card-benefits">
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Chaleur réconfortante et enveloppante</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Relâchement musculaire en profondeur</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Circulation énergétique rééquilibrée</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Détente absolue et esprit apaisé</span>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <div class="card-duration">30-90 min</div>
                                    <div class="card-price">À partir de 59€</div>
                                </div>
                            </div>

                            <div class="formule-card" data-service="massage" onclick="selectFormule('calypsia-aura', 49, 'CALYPSIA AURA - Haut du corps, tête', '30 min')">
                                <h4 class="card-title">CALYPSIA AURA</h4>
                                <p class="card-description">Quand la sérénité caresse vos épaules et s'élève jusqu'a votre esprit.</p>
                                <div class="card-benefits">
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Soulagement des tensions</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Esprit apaisé, pensées allégées</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Détente profonde du haut du corps</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Sensation de clarté mentale</span>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <div class="card-duration">30-45 min</div>
                                    <div class="card-price">À partir de 49€</div>
                                </div>
                            </div>

                            <div class="formule-card" data-service="massage" onclick="selectFormule('calypsia-terra', 49, 'CALYPSIA TERRA - Bas du corps, pieds', '30 min')">
                                <h4 class="card-title">CALYPSIA TERRA</h4>
                                <p class="card-description">Faites circuler l'énergie, libérez les tensions et ressentez la légèreté.</p>
                                <div class="card-benefits">
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Détente des jambes lourdes et fatiguées</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Circulation énergétique réactivée</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Sensation d'ancrage et de stabilité</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Bien-être et légèreté retrouvée</span>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <div class="card-duration">30-45 min</div>
                                    <div class="card-price">À partir de 49€</div>
                                </div>
                            </div>
                        </div>

                        <!-- Lashlift Cards -->
                        <div class="formule-cards" id="lashliftCards" style="display: none;">
                            <div class="formule-card" data-service="lashlift" onclick="selectFormule('irysia', 45, 'IRYSIA - Réhaussement des cils', '45 min')">
                                <h4 class="card-title">IRYSIA</h4>
                                <p class="card-description">L'art de révéler la lumière cachée dans votre regard.</p>
                                <div class="card-benefits">
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Regard agrandi et lumineux</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Courbure élégante sans maquillage</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Instant bien-être et mise en beauté</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Effet "bonne mine" immédiat</span>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <div class="card-duration">45 min</div>
                                    <div class="card-price">45€</div>
                                </div>
                            </div>

                            <div class="formule-card" data-service="lashlift" onclick="selectFormule('irysia-absolu', 59, 'IRYSIA ABSOLU - Soin complet', '55 min')">
                                <h4 class="card-title">IRYSIA ABSOLU</h4>
                                <p class="card-description">Le soin complet qui révèle toute la puissance de votre regard.</p>
                                <div class="card-benefits">
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Regard intense et profond</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Cils fortifiés et nourris</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Effet "mascara" longue durée</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Soin global beauté</span>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <div class="card-duration">55 min</div>
                                    <div class="card-price">59€</div>
                                </div>
                            </div>
                        </div>

                        <!-- Skincare Cards -->
                        <div class="formule-cards" id="skincareCards" style="display: none;">
                            <div class="formule-card" data-service="skincare" data-type="soins-specialises" onclick="selectFormule('sebum-soo', 190, 'SEBUM SOO - Soin Seboclear', '90 min')">
                                <h4 class="card-title">SEBUM SOO</h4>
                                <p class="card-description">Finis la brillance. Bonjour peau nette et matte.<br>Protocole de soins en 7 étapes.</p>
                                <div class="card-benefits">
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Peau purifiée</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Équilibre du sébum</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Hydratation légère</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Teint mat et uniforme</span>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <div class="card-duration">90 min</div>
                                    <div class="card-price">190€</div>
                                </div>
                            </div>
                            <div class="formule-card" data-service="skincare" data-type="soins-specialises" onclick="selectFormule('ho-ya', 199, 'HÖ-YA - Soin Traitement Taches', '90 min')">
                                <h4 class="card-title">HÖ-YA</h4>
                                <p class="card-description">Finis les taches, place au teint uniforme!<br>Protocole de soin en 9 étapes.</p>
                                <div class="card-benefits">
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Teint unifié & lumineux</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Action éclaircissante douce</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Hydratation et confort</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Régénération cellulaire</span>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <div class="card-duration">90 min</div>
                                    <div class="card-price">199€</div>
                                </div>
                            </div>
                            <div class="formule-card" data-service="skincare" data-type="soins-specialises" onclick="selectFormule('yung', 120, 'YUNG - Soin Traitement Acné', '75 min')">
                                <h4 class="card-title">YUNG</h4>
                                <p class="card-description">Bye Bye boutons, Hello baby skin !<br>Protocole de soins en 8 étapes.</p>
                                <div class="card-benefits">
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Peau purifiée</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Hydratation équilibrée</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Réduction des imperfections</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Apaisement immédiat</span>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <div class="card-duration">75 min</div>
                                    <div class="card-price">120€</div>
                                </div>
                            </div>

                            <!-- Anti-Âge -->
                            <div class="formule-card" data-service="skincare" data-type="anti-age" onclick="selectFormule('jaden', 180, 'JADEN - Soin Anti-Âge', '90 min')">
                                <h4 class="card-title">JADEN</h4>
                                <p class="card-description">Vieillir ? Oui. Le montrer ? Jamais.<br>Protocole de soins en 8 étapes.</p>
                                <div class="card-benefits">
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Peau lissée</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Fermeté retrouvée</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Éclat revitalisé</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Action régénérante</span>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <div class="card-duration">90 min</div>
                                    <div class="card-price">180€</div>
                                </div>
                            </div>
                            <div class="formule-card" data-service="skincare" data-type="anti-age" onclick="selectFormule('korean-lift', 180, 'KOREAN LIFT - Lifting Coréen', '90 min')">
                                <h4 class="card-title">KOREAN LIFT</h4>
                                <p class="card-description">Lifting sans chirurgie, visage redessiné en douceur.<br>Protocole de soins en 9 étapes.</p>
                                <div class="card-benefits">
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Peau lissée</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Teint éclatant</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Hydratation intense</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Effet lifting</span>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <div class="card-duration">90 min</div>
                                    <div class="card-price">180€</div>
                                </div>
                            </div>

                            <!-- Régénération -->
                            <div class="formule-card" data-service="skincare" data-type="regeneration" onclick="selectFormule('bae-su', 120, 'BAE SU - Soin Hydratation Intense', '75 min')">
                                <h4 class="card-title">BAE SU</h4>
                                <p class="card-description">Hydratation XXL pour un glow frais.<br>Protocole de soins en 9 étapes.</p>
                                <div class="card-benefits">
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Hydratation profonde</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Peau souple et douce</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Teint lumineux</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Effet apaisant</span>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <div class="card-duration">75 min</div>
                                    <div class="card-price">120€</div>
                                </div>
                            </div>
                            <div class="formule-card" data-service="skincare" data-type="regeneration" onclick="selectFormule('sooha-therapy', 140, 'SOOHA THERAPY - Soin Réparateur', '90 min')">
                                <h4 class="card-title">SOOHA THERAPY</h4>
                                <p class="card-description">Peau sensible, apaisée, réparée, reboostée !<br>Protocole de soins en 9 étapes.</p>
                                <div class="card-benefits">
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Peau apaisée</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Barrière renforcée</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Hydratation profonde</span>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <div class="card-duration">90 min</div>
                                    <div class="card-price">140€</div>
                                </div>
                            </div>

                            <!-- Korean Glow -->
                            <div class="formule-card" data-service="skincare" data-type="korean-glow" onclick="selectFormule('g-wang', 90, 'G-WANG - Soin Éclat', '60 min')">
                                <h4 class="card-title">G-WANG</h4>
                                <p class="card-description">Mode Highlighter naturel activé !<br>Protocole de soin en 7 étapes.</p>
                                <div class="card-benefits">
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Teint lumineux et éclatant</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Peau douce et lissée</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Hydratation intense</span>
                                    </div>
                                    <div class="benefit-item">
                                        <div class="benefit-check">✓</div>
                                        <span>Effet bonne mine immédiat</span>
                                    </div>
                                </div>
                                <div class="card-footer">
                                    <div class="card-duration">60 min</div>
                                    <div class="card-price">90€</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="step" id="step2">
                        <h3 class="step-title">Choisissez votre durée</h3>
                        <div class="duration-content">
                            <div class="duration-options" id="durationOptions">
                                <!-- Les options de durée seront générées dynamiquement -->
                                </div>
                                </div>
                                </div>

                    <div class="step" id="step3">
                        <h3 class="step-title">Détails de votre soin</h3>
                        <div class="details-content">
                            <div class="details-card">
                                <div class="details-header">
                                    <h4 id="detailsServiceName">-</h4>
                                    <div class="details-info">
                                        <div class="details-duration" id="detailsDuration">-</div>
                                        <div class="details-price" id="detailsPrice">-</div>
                                </div>
                                </div>
                                <div class="details-description" id="detailsDescription">
                                    <p>Chargement des détails...</p>
                                </div>
                                <div class="details-benefits">
                                    <h5>Ce que vous allez vivre :</h5>
                                    <ul id="detailsBenefitsList">
                                        <li>Chargement des bénéfices...</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="step" id="step4">
                        <h3 class="step-title">Confirmez votre expérience bien-être</h3>
                        <div class="summary-content">
                            <div class="summary-card">
                                <div class="summary-item">
                                    <span class="summary-label">Service</span>
                                    <span class="summary-value" id="summaryService">-</span>
                                </div>
                                <div class="summary-item" id="summaryTypeRow" style="display: none;">
                                    <span class="summary-label">Type de soin</span>
                                    <span class="summary-value" id="summaryType">-</span>
                                </div>
                                <div class="summary-item">
                                    <span class="summary-label">Formule</span>
                                    <span class="summary-value" id="summaryFormule">-</span>
                                </div>
                                <div class="summary-item summary-item-no-border">
                                    <span class="summary-label">Détails</span>
                                    <span class="summary-value" id="summaryDuration">-</span>
                                </div>
                                <div class="summary-item">
                                    <span class="summary-label">Total</span>
                                    <span class="summary-value" id="summaryPrice">-</span>
                                </div>
                            </div>
                            <p class="modal-subtitle">
                                Vous serez redirigé vers notre page de réservation sécurisée pour choisir votre créneau.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-navigation">
                <button class="back-button" id="backButton" onclick="goBack()">
                    <span class="back-text-desktop">← Étape précédente</span>
                    <span class="back-text-mobile">← Précédent</span>
                </button>
                <button class="continue-button" id="continueButton" onclick="goToNextStep()">
                    <span class="continue-text-desktop">Continuer vers la réservation →</span>
                    <span class="continue-text-mobile">Continuer →</span>
                </button>
                <a href="reservation.html" class="cta-button" id="reservationButton" onclick="bookAppointment(event)" style="display: none;">
                    <span class="cta-button-text-desktop">Je réserve ma séance maintenant →</span>
                    <span class="cta-button-text-mobile">Réserver maintenant →</span>
                </a>
            </div>
        </div>
        
        <!-- Flèche de scroll pour étapes Formule et Type sur tous les écrans -->
        <div class="formule-scroll-arrow" id="formuleScrollArrow" onclick="scrollToModalBottom()">
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
            </svg>
        </div>
    </div>

    <!-- Modal de redirection glassmorphism -->
    <div id="redirectModal" class="redirect-modal" style="display: none;">
        <div class="redirect-modal-content">
            <div class="redirect-icon">
                <i data-lucide="arrow-right-circle" class="redirect-arrow"></i>
            </div>
            <h3 class="redirect-title">Redirection en cours...</h3>
            <p class="redirect-message">Vous allez être redirigé vers notre plateforme de réservation pour choisir votre date et heure.</p>
            <div class="redirect-countdown">
                <span id="countdown">3</span>s
            </div>
        </div>
    </div>

    <script>
        // Global State - moved outside DOMContentLoaded for proper scope
        let currentStep = 1; // Default starting step for 3-step services
        let totalSteps = 3;
        let selectedService = '';
        let selectedServiceName = '';
        let selectedFormulaType = '';
        let selectedFormulaTypeName = '';
        let selectedFormule = null;
        let selectedFormuleName = '';
        let selectedDuration = null;
        let selectedDurationName = '';
        let basePrice = 0;
        let priceMultiplier = 1;
        let savedScrollPosition = 0; // Store scroll position when modal opens

        // Utility: Find which step set is active
        function getActiveStepsElement() {
            return selectedService === 'skincare' ? document.getElementById('progressSteps4') : document.getElementById('progressSteps3');
        }

        // Utility: Get step ID based on service type
        function getStepId(stepNumber) {
            if (selectedService === 'skincare') {
                if (stepNumber === 0) return 'progressStep0';
                if (stepNumber === 1) return 'progressStep1-sk';
                if (stepNumber === 2) return 'progressStep2-sk';
                if (stepNumber === 3) return 'progressStep3-sk';
            } else {
                if (stepNumber === 1) return 'progressStep1';
                if (stepNumber === 2) return 'progressStep2';
                if (stepNumber === 3) return 'progressStep3';
            }
            return '';
        }
        
        // --- Modal Control Functions - Service Specific ---

        function openModalHeadSpa() {
            selectedService = 'head-spa';
            selectedServiceName = 'Head Spa';
            totalSteps = 3; // Head Spa has 3 steps in progress bar: Formule → Détails → Réservation
            currentStep = 1;

            document.getElementById('progressSteps3').style.display = 'flex';
            document.getElementById('progressSteps4').style.display = 'none';
            document.getElementById('modalServiceTitle').textContent = 'Head Spa';
            
            // Masquer la flèche de scroll initialement et supprimer le listener
            const formuleScrollArrow = document.getElementById('formuleScrollArrow');
            if (formuleScrollArrow) {
                formuleScrollArrow.style.display = 'none';
            }
            removeScrollListener();

            // Réinitialiser le bouton Précédent
            const backButton = document.getElementById('backButton');
            if (backButton) {
                backButton.classList.remove('disabled');
            }

            // Show only Head Spa cards
            document.getElementById('headSpaCards').style.display = 'flex';
            document.getElementById('massageCards').style.display = 'none';
            document.getElementById('skincareCards').style.display = 'none';
            document.getElementById('lashliftCards').style.display = 'none';
            
            // Show all Head Spa formula cards
            filterFormulas('head-spa');
            
            // Ensure other service cards are hidden
            document.querySelectorAll('.formule-card[data-service="massage"]').forEach(card => card.style.display = 'none');
            document.querySelectorAll('.formule-card[data-service="skincare"]').forEach(card => card.style.display = 'none');
            document.querySelectorAll('.formule-card[data-service="lashlift"]').forEach(card => card.style.display = 'none');

            // Hide duration step for Head Spa
            const durationStep = document.getElementById('step2');
            const durationProgressStep = document.getElementById('progressStep2');
            const durationProgressLine = document.getElementById('progressLine2');
            if (durationStep) durationStep.style.display = 'none';
            if (durationProgressStep) durationProgressStep.style.display = 'none';
            if (durationProgressLine) durationProgressLine.style.display = 'none';

            document.getElementById('modalOverlay').classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // Prevent page scroll on mobile when modal is open
            if (window.innerWidth <= 768) {
                savedScrollPosition = window.scrollY;
                document.body.style.position = 'fixed';
                document.body.style.width = '100%';
                document.body.style.top = `-${savedScrollPosition}px`;
                
                // Hide zen progress bar and floating menu on mobile
                const zenProgress = document.querySelector('.zen-scroll-progress');
                const floatingMenu = document.querySelector('.floating-menu-trigger');
                if (zenProgress) zenProgress.style.display = 'none';
                if (floatingMenu) floatingMenu.style.display = 'none';
            }

            resetSelections();
            goToStep(currentStep, true);
        }

        function openModalMassage() {
            console.log('Opening massage modal...');
            selectedService = 'massage';
            selectedServiceName = 'Massage';
            totalSteps = 4;
            currentStep = 1;
            
            // Masquer la flèche de scroll initialement et supprimer le listener
            const formuleScrollArrow = document.getElementById('formuleScrollArrow');
            if (formuleScrollArrow) {
                formuleScrollArrow.style.display = 'none';
            }
            removeScrollListener();

            // Réinitialiser le bouton Précédent
            const backButton = document.getElementById('backButton');
            if (backButton) {
                backButton.classList.remove('disabled');
            }

            document.getElementById('progressSteps3').style.display = 'flex';
            document.getElementById('progressSteps4').style.display = 'none';
            document.getElementById('modalServiceTitle').textContent = 'Massage';

            // Show only Massage cards
            document.getElementById('headSpaCards').style.display = 'none';
            document.getElementById('massageCards').style.display = 'flex';
            document.getElementById('skincareCards').style.display = 'none';
            document.getElementById('lashliftCards').style.display = 'none';
            
            // Explicitly show all Massage cards FIRST
            document.querySelectorAll('.formule-card[data-service="massage"]').forEach(card => {
                card.style.display = 'flex';
            });
            
            // Then filter formulas
            filterFormulas('massage');
            
            // Ensure other service cards are hidden
            document.querySelectorAll('.formule-card[data-service="head-spa"]').forEach(card => card.style.display = 'none');
            document.querySelectorAll('.formule-card[data-service="skincare"]').forEach(card => card.style.display = 'none');
            document.querySelectorAll('.formule-card[data-service="lashlift"]').forEach(card => card.style.display = 'none');

            // Show duration step for Massage
            const durationStep = document.getElementById('step2');
            const durationProgressStep = document.getElementById('progressStep2');
            const durationProgressLine = document.getElementById('progressLine2');
            if (durationStep) {
                durationStep.style.display = 'block';
                console.log('Duration step displayed for massage');
            }
            if (durationProgressStep) durationProgressStep.style.display = 'flex';
            if (durationProgressLine) durationProgressLine.style.display = 'block';

            document.getElementById('modalOverlay').classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // Prevent page scroll on mobile when modal is open
            if (window.innerWidth <= 768) {
                savedScrollPosition = window.scrollY;
                document.body.style.position = 'fixed';
                document.body.style.width = '100%';
                document.body.style.top = `-${savedScrollPosition}px`;
                
                // Hide zen progress bar and floating menu on mobile
                const zenProgress = document.querySelector('.zen-scroll-progress');
                const floatingMenu = document.querySelector('.floating-menu-trigger');
                if (zenProgress) zenProgress.style.display = 'none';
                if (floatingMenu) floatingMenu.style.display = 'none';
            }

            // IMPORTANT : Réinitialiser les sélections AVANT de filter
            resetSelections();
            
            console.log('About to go to step 1...');
            // Add a small delay to ensure filterFormulas completes
            setTimeout(() => {
                goToStep(currentStep, true);
            }, 100);
        }

        function openModalSkincare() {
            selectedService = 'skincare';
            selectedServiceName = 'Skincare';
            totalSteps = 4;
            currentStep = 0;
            
            // Masquer la flèche de scroll initialement et supprimer le listener
            const formuleScrollArrow = document.getElementById('formuleScrollArrow');
            if (formuleScrollArrow) {
                formuleScrollArrow.style.display = 'none';
            }
            removeScrollListener();

            // Réinitialiser le bouton Précédent
            const backButton = document.getElementById('backButton');
            if (backButton) {
                backButton.classList.remove('disabled');
            }

            document.getElementById('progressSteps3').style.display = 'none';
            document.getElementById('progressSteps4').style.display = 'flex';
            document.getElementById('modalServiceTitle').textContent = 'Skincare';

            // Show only Skincare type cards initially (step 0)
            document.getElementById('skincareTypeCards').style.display = 'grid';
            document.getElementById('headSpaCards').style.display = 'none';
            document.getElementById('massageCards').style.display = 'none';
            document.getElementById('skincareCards').style.display = 'none';
            document.getElementById('lashliftCards').style.display = 'none';
            
            // Hide all formula cards initially for Skincare
            document.querySelectorAll('.formule-card[data-service="skincare"]').forEach(card => card.style.display = 'none');
            
            // Ensure other service cards are hidden
            document.querySelectorAll('.formule-card[data-service="head-spa"]').forEach(card => card.style.display = 'none');
            document.querySelectorAll('.formule-card[data-service="massage"]').forEach(card => card.style.display = 'none');
            document.querySelectorAll('.formule-card[data-service="lashlift"]').forEach(card => card.style.display = 'none');

            // Hide duration step for Skincare
            const durationStep = document.getElementById('step2');
            const durationProgressStep = document.getElementById('progressStep2');
            const durationProgressLine = document.getElementById('progressLine2');
            if (durationStep) durationStep.style.display = 'none';
            if (durationProgressStep) durationProgressStep.style.display = 'none';
            if (durationProgressLine) durationProgressLine.style.display = 'none';

            document.getElementById('modalOverlay').classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // Prevent page scroll on mobile when modal is open
            if (window.innerWidth <= 768) {
                savedScrollPosition = window.scrollY;
                document.body.style.position = 'fixed';
                document.body.style.width = '100%';
                document.body.style.top = `-${savedScrollPosition}px`;
                
                // Hide zen progress bar and floating menu on mobile
                const zenProgress = document.querySelector('.zen-scroll-progress');
                const floatingMenu = document.querySelector('.floating-menu-trigger');
                if (zenProgress) zenProgress.style.display = 'none';
                if (floatingMenu) floatingMenu.style.display = 'none';
            }

            resetSelections();
            goToStep(currentStep, true);
        }

        function openModalLashlift() {
            selectedService = 'lashlift';
            selectedServiceName = 'Lashlift';
            totalSteps = 3; // Lashlift has 3 steps in progress bar: Formule → Détails → Réservation
            currentStep = 1;
            
            // Masquer la flèche de scroll initialement et supprimer le listener
            const formuleScrollArrow = document.getElementById('formuleScrollArrow');
            if (formuleScrollArrow) {
                formuleScrollArrow.style.display = 'none';
            }
            removeScrollListener();

            // Réinitialiser le bouton Précédent
            const backButton = document.getElementById('backButton');
            if (backButton) {
                backButton.classList.remove('disabled');
            }

            document.getElementById('progressSteps3').style.display = 'flex';
            document.getElementById('progressSteps4').style.display = 'none';
            document.getElementById('modalServiceTitle').textContent = 'Lashlift';

            // Show only Lashlift cards
            document.getElementById('headSpaCards').style.display = 'none';
            document.getElementById('massageCards').style.display = 'none';
            document.getElementById('skincareCards').style.display = 'none';
            document.getElementById('lashliftCards').style.display = 'flex';
            
            // Show all Lashlift formula cards
            filterFormulas('lashlift');
            
            // Ensure Lashlift cards are visible
            document.querySelectorAll('.formule-card[data-service="lashlift"]').forEach(card => {
                card.style.display = 'flex';
            });

            // Hide duration step for Lashlift
            const durationStep = document.getElementById('step2');
            const durationProgressStep = document.getElementById('progressStep2');
            const durationProgressLine = document.getElementById('progressLine2');
            if (durationStep) durationStep.style.display = 'none';
            if (durationProgressStep) durationProgressStep.style.display = 'none';
            if (durationProgressLine) durationProgressLine.style.display = 'none';

            // Show modal
            document.getElementById('modalOverlay').classList.add('active');
            document.body.style.overflow = 'hidden';

            // Mobile scroll lock
            if (window.innerWidth <= 768) {
                savedScrollPosition = window.scrollY;
                document.body.style.position = 'fixed';
                document.body.style.width = '100%';
                document.body.style.top = `-${savedScrollPosition}px`;
                
                // Hide zen progress bar and floating menu on mobile
                const zenProgress = document.querySelector('.zen-scroll-progress');
                const floatingMenu = document.querySelector('.floating-menu-trigger');
                if (zenProgress) zenProgress.style.display = 'none';
                if (floatingMenu) floatingMenu.style.display = 'none';
            }

            resetSelections();
            goToStep(currentStep, true);
        }

        function closeModal() {
            document.getElementById('modalOverlay').classList.remove('active');
            document.body.style.overflow = '';

            // Masquer la flèche de scroll et supprimer le listener
            const formuleScrollArrow = document.getElementById('formuleScrollArrow');
            if (formuleScrollArrow) {
                formuleScrollArrow.style.display = 'none';
            }
            removeScrollListener();

            // Restore page scroll on mobile when modal is closed
            if (window.innerWidth <= 768) {
                document.body.style.position = '';
                document.body.style.width = '';
                document.body.style.top = '';
                window.scrollTo(0, savedScrollPosition);

                // CORRECTION: Afficher à nouveau la zen progress bar et le floating menu
                const zenProgress = document.querySelector('.zen-scroll-progress');
                const floatingMenu = document.querySelector('.floating-menu-trigger');

                if (zenProgress) {
                    zenProgress.style.display = 'block';
                }

                if (floatingMenu) {
                    // Restaurer l'affichage du menu flottant
                    floatingMenu.style.display = 'flex';

                    // PAS DE RÉINITIALISATION de la position si elle a été déplacée par l'utilisateur
                    // Garder la position actuelle définie par left/top
                    // Ne réinitialiser que si la position n'a pas été personnalisée
                    if (!floatingMenu.style.left || floatingMenu.style.left === '') {
                        // Position par défaut uniquement si aucune position personnalisée
                        floatingMenu.style.right = '1rem';
                        floatingMenu.style.top = '58vh';
                        floatingMenu.style.left = '';
                        floatingMenu.style.transform = 'translateY(-50%)';
                    }
                    // Sinon, conserver la position actuelle (left/top définis)
                }
            }

            setTimeout(() => {
                // Reset state to default after closing animation
                selectedService = '';
                selectedServiceName = '';
                selectedFormulaType = '';
                selectedFormulaTypeName = '';
                totalSteps = 3;
                currentStep = 1;
                resetSelections();
            }, 500);
        }

        function scrollToModalBottom() {
            const modal = document.getElementById('modal');
            const modalNavigation = modal.querySelector('.modal-navigation');
            
            if (modalNavigation) {
                modalNavigation.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'end' 
                });
            }
        }

        // Variables pour gérer le listener de scroll
        let scrollListener = null;

        function addScrollListener() {
            // Supprimer l'ancien listener s'il existe
            removeScrollListener();
            
            scrollListener = function() {
                const modal = document.getElementById('modal');
                const modalContent = modal.querySelector('.modal-content');
                const formuleScrollArrow = document.getElementById('formuleScrollArrow');
                
                if (modalContent && formuleScrollArrow) {
                    // Calculer si on est proche du bas du modal
                    const scrollTop = modalContent.scrollTop;
                    const scrollHeight = modalContent.scrollHeight;
                    const clientHeight = modalContent.clientHeight;
                    const scrollBottom = scrollHeight - clientHeight;
                    
                    // Masquer la flèche si on est à moins de 100px du bas
                    if (scrollTop >= scrollBottom - 100) {
                        formuleScrollArrow.style.opacity = '0';
                        formuleScrollArrow.style.transform = 'translateX(-50%) scale(0.8)';
                    } else {
                        formuleScrollArrow.style.opacity = '1';
                        formuleScrollArrow.style.transform = 'translateX(-50%) scale(1)';
                    }
                }
            };
            
            // Ajouter le listener au modal-content
            const modal = document.getElementById('modal');
            const modalContent = modal.querySelector('.modal-content');
            if (modalContent) {
                modalContent.addEventListener('scroll', scrollListener);
            }
        }

        function removeScrollListener() {
            if (scrollListener) {
                const modal = document.getElementById('modal');
                const modalContent = modal.querySelector('.modal-content');
                if (modalContent) {
                    modalContent.removeEventListener('scroll', scrollListener);
                }
                scrollListener = null;
            }
            
            // Réinitialiser l'opacité de la flèche
            const formuleScrollArrow = document.getElementById('formuleScrollArrow');
            if (formuleScrollArrow) {
                formuleScrollArrow.style.opacity = '1';
                formuleScrollArrow.style.transform = 'translateX(-50%) scale(1)';
            }
        }

        function resetSelections() {
            selectedFormule = null;
            selectedFormuleName = '';
            selectedDuration = null;
            selectedDurationName = '';
            basePrice = 0;
            priceMultiplier = 1;
            selectedFormulaType = '';
            selectedFormulaTypeName = '';

            document.querySelectorAll('.formule-card').forEach(card => card.classList.remove('selected'));
            document.querySelectorAll('.duration-button').forEach(button => button.classList.remove('selected'));
            document.querySelectorAll('.formula-type-card').forEach(card => card.classList.remove('selected'));
            
            // Reset SOLO/DUO toggle
            document.querySelectorAll('.toggle-option').forEach(option => {
                option.classList.remove('active');
            });
            // Set SOLO as default
            const soloOption = document.querySelector('.toggle-option[data-type="solo"]');
            if (soloOption) {
                soloOption.classList.add('active');
            }
            
            // Reset price multiplier to 1 (SOLO)
            priceMultiplier = 1;

            // Reset summary display
            const summaryTypeRow = document.getElementById('summaryTypeRow');
            if (summaryTypeRow) {
                summaryTypeRow.style.display = 'none';
            }
        }

        // --- Step Navigation Functions ---
        function updateServiceDetails() {
            const serviceName = document.getElementById('detailsServiceName');
            const servicePrice = document.getElementById('detailsPrice');
            const serviceDuration = document.getElementById('detailsDuration');
            const serviceDescription = document.getElementById('detailsDescription');
            const serviceBenefits = document.getElementById('detailsBenefitsList');
            
            if (serviceName && servicePrice && serviceDuration && serviceDescription && serviceBenefits) {
                // Get service details based on selected service and formula
                let serviceTitle = '';
                let serviceDesc = '';
                let localBasePrice = 0;
                let benefits = [];
                
                if (selectedService === 'head-spa') {
                    serviceTitle = selectedFormuleName || 'Head Spa Coréen';
                    serviceDesc = 'Une expérience de relaxation unique inspirée des traditions coréennes. Ce soin combine massage du cuir chevelu, soins capillaires et techniques de bien-être pour une détente profonde.';
                    
                    // Set base price according to formula
                    if (selectedFormuleName === 'CHOGAK - L\'ÉCLAT') {
                        localBasePrice = 60;
                    } else if (selectedFormuleName === 'BOM - LE PRINTEMPS') {
                        localBasePrice = 100;
                    } else if (selectedFormuleName === 'HANEUL - LE CIEL') {
                        localBasePrice = 120;
                    } else if (selectedFormuleName === 'HEAD DREAM - L\'EXPÉRIENCE ULTIME') {
                        localBasePrice = 150;
                    } else {
                        localBasePrice = 60; // Default
                    }
                    
                    benefits = [
                        'Massage du cuir chevelu aux huiles essentielles',
                        'Soins capillaires avec produits coréens premium',
                        'Techniques de relaxation et méditation',
                        'Détente profonde du visage et du cou',
                        'Résultats immédiats et durables'
                    ];
                    
                    // Add SOLO/DUO toggle ONLY for Head Spa
                    const detailsCard = document.querySelector('.details-card');
                    if (detailsCard && !detailsCard.querySelector('.solo-duo-toggle')) {
                        const toggleHTML = `
                            <div class="solo-duo-toggle">
                                <div class="toggle-options">
                                    <div class="toggle-option active" data-type="solo" onclick="selectSoloDuo('solo')">
                                        <div class="toggle-icon">
                                            <i data-lucide="user"></i>
                                        </div>
                                        <span>SOLO</span>
                                    </div>
                                    <div class="toggle-option" data-type="duo" onclick="selectSoloDuo('duo')">
                                        <div class="toggle-icon">
                                            <i data-lucide="users"></i>
                                        </div>
                                        <span>DUO</span>
                                    </div>
                                </div>
                            </div>
                        `;
                        // Insert after the title (h4) but before the details-info
                        const titleElement = detailsCard.querySelector('.details-header h4');
                        if (titleElement) {
                            titleElement.insertAdjacentHTML('afterend', toggleHTML);
                        } else {
                            detailsCard.insertAdjacentHTML('afterbegin', toggleHTML);
                        }
                    }
                    lucide.createIcons();
                } else if (selectedService === 'massage') {
                    serviceTitle = selectedFormuleName || 'Massage Relaxant';
                    serviceDesc = 'Un massage thérapeutique personnalisé pour libérer les tensions et restaurer l\'équilibre de votre corps. Techniques adaptées à vos besoins pour une relaxation optimale.';
                    // Don't override basePrice for massage - use the one set during duration selection
                    benefits = [
                        'Libération des tensions musculaires',
                        'Amélioration de la circulation sanguine',
                        'Réduction du stress et de l\'anxiété',
                        'Techniques personnalisées selon vos besoins',
                        'Relaxation profonde et récupération'
                    ];
                    } else if (selectedService === 'skincare') {
                    serviceTitle = selectedFormuleName || 'Skincare Coréenne';
                    
                    // Set description and benefits based on the selected formula
                    if (selectedFormule === 'sebum-soo') {
                        serviceDesc = 'Régule l\'excès de sébum, affine le grain de peau et matifie pour un teint net.';
                        benefits = [
                            'Peau purifiée – Élimine impuretés et excès de sébum pour un teint net.',
                            'Équilibre du sébum – Régule la production sans dessécher la peau.',
                            'Hydratation légère – Maintient une peau souple et fraîche.',
                            'Teint mat et uniforme – Réduit les brillances et affine le grain de peau.'
                        ];
                    } else if (selectedFormule === 'ho-ya') {
                        serviceDesc = 'Traitement ciblé pour éliminer les taches pigmentaires et unifier le teint.';
                        benefits = [
                            'Teint unifié & lumineux – Corrige les taches pigmentaires et redonne éclat à la peau.',
                            'Action éclaircissante douce – Réduit visiblement les irrégularités sans agresser.',
                            'Hydratation et confort – Apaise et nourrit pour une peau souple et équilibrée.',
                            'Régénération cellulaire – Favorise le renouvellement cutané pour un teint plus homogène.'
                        ];
                        } else if (selectedFormule === 'yung') {
                            serviceDesc = 'Un soin ciblé qui agit sur les imperfections, purifie la peau et restaure sa douceur.';
                            benefits = [
                                'Peau purifiée – Nettoie en profondeur et régule l\'excès de sébum.',
                                'Hydratation équilibrée – Nourrit sans alourdir, pour une peau confortable.',
                                'Réduction des imperfections – Atténue boutons et marques résiduelles.',
                                'Apaisement immédiat – Diminue les rougeurs et calme les irritations.'
                            ];
                    } else if (selectedFormule === 'jaden') {
                        serviceDesc = 'Ce soin anti-âge complet exfolie la peau pour la purifier, maximise l\'efficacité d\'un sérum et d\'un masque ciblé incluant des manœuvres stimulantes pour un résultat visible. Préservez votre capital jeunesse grâce à ce soin anti-âge.';
                        benefits = [
                            'Peau lissée – Atténue rides et ridules, pour une peau plus jeune.',
                            'Fermeté retrouvée – Redonne tonicité et élasticité aux tissus cutanés.',
                            'Éclat revitalisé – Illumine le teint et ravive l\'éclat naturel du visage.',
                            'Action régénérante – Stimule le renouvellement cellulaire et la production de collagène.'
                        ];
                    } else if (selectedFormule === 'korean-lift') {
                        serviceDesc = 'Lifting coréen doux et non invasif qui redessine les contours du visage. Zéro chirurgie. Effet lift naturel Comme un fil invisible qui retisse les lignes du visage avec délicatesse..';
                        benefits = [
                            'Peau lissée – grâce à une technologie de pointe',
                            'Teint éclatant – par l\'infusion de sérums actifs',
                            'Hydratation intense – avec des actifs repulpants',
                            'Effet lifting – visible dès la première séance – sans aucune intervention chirurgicale'
                        ];
                    } else if (selectedFormule === 'bae-su') {
                        serviceDesc = 'Hydratation profonde qui repulpe et rafraîchit la peau pour un effet rebondi immédiat. Hydratation XXL pour un GLOW frais !';
                        benefits = [
                            'Hydratation profonde – Restaure l\'eau dans les couches cutanées pour une peau repulpée.',
                            'Peau souple et douce – Nourrit et adoucit sans effet gras.',
                            'Teint lumineux – Apporte éclat et fraîcheur immédiate.',
                            'Effet apaisant – Calme la peau et réduit les sensations de tiraillement.'
                        ];
                    } else if (selectedFormule === 'sooha-therapy') {
                        serviceDesc = 'Un soin calmant pour apaiser les peaux sensibles, réparer et redonner confort. Peau sensible apaisée, réparée, reboostée !';
                        benefits = [
                            'Peau apaisée – Calme les irritations et les rougeurs.',
                            'Barrière renforcée – Protège et répare la peau fragilisée.',
                            'Hydratation profonde – Nourrit intensément pour restaurer le confort.'
                        ];
                    } else if (selectedFormule === 'g-wang') {
                        serviceDesc = 'Un soin illuminateur qui réveille l\'éclat naturel de la peau pour un effet highlighter sans maquillage.';
                        benefits = [
                            'Teint lumineux et éclatant – Ravive instantanément l\'éclat du visage.',
                            'Peau douce et lissée – Élimine les impuretés et affine le grain de peau.',
                            'Hydratation intense – Apporte confort et souplesse à la peau.',
                            'Effet bonne mine immédiat – Réveille la peau fatiguée et terne.'
                        ];
                    } else {
                        serviceDesc = 'Rituel de beauté coréen complet pour une peau éclatante et hydratée.';
                        benefits = ['Nettoyage en profondeur', 'Hydratation intensive', 'Techniques K-Beauty', 'Éclat immédiat', 'Routine personnalisée'];
                    }
                    
                    localBasePrice = 90; // Prix de base pour G-WANG
                } else if (selectedService === 'lashlift') {
                    serviceTitle = selectedFormuleName || 'Lashlift';
                    
                    // Set description and benefits based on the selected formula
                    if (selectedFormule === 'irysia') {
                        serviceDesc = 'Rehaussement des cils – L\'art de révéler la lumière cachée dans votre regard.';
                        benefits = [
                            'Regard naturellement agrandi et lumineux – Révèle la beauté naturelle de vos yeux.',
                            'Courbure élégante sans maquillage – Effet naturel et sophistiqué.',
                            'Instant bien-être et mise en beauté – Moment de détente et de beauté.',
                            'Effet "bonne mine" immédiat – Regard frais et éveillé instantanément.'
                        ];
                    } else if (selectedFormule === 'irysia-absolu') {
                        serviceDesc = 'Rehaussement des cils + soin botox + teinture – Le soin complet qui révèle toute la puissance de votre regard.';
                        benefits = [
                            'Regard intense et profond – Magnifie la profondeur de votre regard.',
                            'Cils fortifiés et nourris en profondeur – Renforce et nourrit vos cils.',
                            'Teinte naturelle pour un effet "mascara" longue durée – Effet maquillage naturel et durable.',
                            'Soin global beauté & renforcement des cils – Approche complète pour des cils parfaits.'
                        ];
                    } else {
                        serviceDesc = 'Révélez la puissance de votre regard avec notre technique de réhaussement de cils. Des cils naturellement courbés et allongés pour un regard magnétique et durable.';
                        benefits = ['Réhaussement naturel', 'Résultat durable', 'Regard magnétique', 'Technique professionnelle', 'Effet immédiat'];
                    }
                    
                    localBasePrice = 45; // Prix de base pour IRYSIA
                }
                
                serviceName.textContent = serviceTitle;
                serviceDuration.textContent = selectedDuration || '60 min';
                
                // For massage, use the global basePrice (updated during duration selection); for skincare, use the selected price; for others, use local basePrice
                if (selectedService === 'massage') {
                    // Use the global basePrice which is updated when duration is selected
                    servicePrice.textContent = `${basePrice}€`;
                } else if (selectedService === 'skincare') {
                    // Use the global basePrice which is set when formula is selected
                    servicePrice.textContent = `${basePrice}€`;
                } else if (selectedService === 'lashlift') {
                    // Use the global basePrice which is set when formula is selected
                    servicePrice.textContent = `${basePrice}€`;
                } else {
                    // For Head Spa, show SOLO price directly (no "À partir de")
                    servicePrice.textContent = `${localBasePrice}€`;
                }
                
                serviceDescription.innerHTML = `<p>${serviceDesc}</p>`;
                serviceBenefits.innerHTML = benefits.map(benefit => `<li>${benefit}</li>`).join('');
                
                // Remove SOLO/DUO toggle for non-Head Spa services
                if (selectedService !== 'head-spa') {
                    const existingToggle = document.querySelector('.solo-duo-toggle');
                    if (existingToggle) {
                        existingToggle.remove();
                    }
                }
            }
        }

        function goToStep(step, immediate = false) {
            // Step mapping for different services
            const stepMapping = { 0: 'step0', 1: 'step1', 2: 'step2', 3: 'step3', 4: 'step4' };

            // Gérer l'affichage de la flèche de scroll pour l'étape Formule et Type sur tous les écrans
            const formuleScrollArrow = document.getElementById('formuleScrollArrow');
            if (step === 1 || (step === 0 && selectedService === 'skincare')) {
                // Afficher la flèche pour l'étape Formule (step 1) ou Type (step 0) pour Skincare
                formuleScrollArrow.style.display = 'flex';
                // Ajouter le listener de scroll pour masquer la flèche en bas
                addScrollListener();
            } else {
                // Masquer la flèche pour les autres étapes
                formuleScrollArrow.style.display = 'none';
                // Supprimer le listener de scroll
                removeScrollListener();
            }

            // Gérer l'état du bouton Précédent
            const backButton = document.getElementById('backButton');
            if (backButton) {
                // Déterminer la première étape selon le service
                let firstStep = 1; // Par défaut
                if (selectedService === 'skincare') {
                    firstStep = 0; // Skincare commence à l'étape Type (0)
                }
                
                if (step === firstStep) {
                    // Première étape : griser le bouton Précédent
                    backButton.classList.add('disabled');
                } else {
                    // Autres étapes : activer le bouton Précédent
                    backButton.classList.remove('disabled');
                }
            }

            // Hide duration step (step2) for non-massage services
            const durationStep = document.getElementById('step2');
            if (durationStep) {
                if (selectedService === 'massage') {
                    durationStep.style.display = 'block';
                } else {
                    durationStep.style.display = 'none';
                }
            }

            // Update step active classes
            document.querySelectorAll('.step').forEach(stepEl => {
                stepEl.classList.remove('active');
            });

            const targetStep = document.getElementById(stepMapping[step]);
            if (targetStep) {
                targetStep.classList.add('active');
            }

            // Scroll to top of modal content when changing steps
            const modalContent = document.querySelector('.modal-content');
            if (modalContent) {
                modalContent.scrollTop = 0;
            }

            // Update service details when reaching the details step
            if ((selectedService === 'massage' && step === 3) || (selectedService === 'skincare' && step === 3) || (selectedService === 'head-spa' && step === 3)) {
                updateServiceDetails();
            }

            // Back button visibility
            const firstStep = selectedService === 'skincare' ? 0 : 1;
            if (step > firstStep) {
                backButton.classList.add('visible');
            } else {
                backButton.classList.remove('visible');
            }
            
            // Continue button visibility (only show on details step)
            const continueButton = document.getElementById('continueButton');
            if (continueButton) {
                let detailsStep;
                if (selectedService === 'massage') {
                    detailsStep = 3; // Massage: Step 3 is Details
                } else if (selectedService === 'skincare') {
                    detailsStep = 3; // Skincare: Step 3 is Details
                } else {
                    detailsStep = 3; // Head Spa: Step 3 is Details
                }
                
                if (step === detailsStep) {
                    continueButton.classList.add('visible');
                } else {
                    continueButton.classList.remove('visible');
                }
            }
            
            // Reservation button visibility (only show on last step)
            const reservationButton = document.getElementById('reservationButton');
            let lastStep;
            if (selectedService === 'massage') {
                lastStep = 4; // Massage: Step 4 is Reservation
            } else if (selectedService === 'skincare') {
                lastStep = 4; // Skincare: Step 4 is Reservation
            } else {
                lastStep = 4; // Head Spa: Step 4 is Reservation
            }
            
            if (step === lastStep) {
                reservationButton.style.display = 'inline-block';
            } else {
                reservationButton.style.display = 'none';
            }

            currentStep = step;
            updateProgress();
        }

        function goBack() {
            const firstStep = selectedService === 'skincare' ? 0 : 1;
            if (currentStep > firstStep) {
                let previousStep;
                
                if (selectedService === 'skincare') {
                    // Skincare: 0 → 1 → 3 → 4 (pas d'étape 2 - durée)
                    if (currentStep === 4) {
                        previousStep = 3; // Réservation → Détails
                    } else if (currentStep === 3) {
                        previousStep = 1; // Détails → Formule (skip durée)
                    } else if (currentStep === 1) {
                        previousStep = 0; // Formule → Type
                        resetSelections(); // Reset formula and duration too
                        // Show type cards and hide formula cards
                        document.getElementById('skincareTypeCards').style.display = 'grid';
                        document.getElementById('skincareCards').style.display = 'none';
                        // Hide all Skincare formula cards when going back to type selection
                        document.querySelectorAll('.formule-card[data-service="skincare"]').forEach(card => card.style.display = 'none');
                    }
                } else if (selectedService === 'massage') {
                    // Massage: 1 → 2 → 3 → 4
                    previousStep = currentStep - 1;
                } else if (selectedService === 'lashlift') {
                    // Lashlift: 1 → 3 → 4 (skip durée)
                    if (currentStep === 4) {
                        previousStep = 3; // Réservation → Détails
                    } else if (currentStep === 3) {
                        previousStep = 1; // Détails → Formule (skip durée)
                    }
                } else {
                    // Head Spa: 1 → 3 → 4 (skip durée)
                    if (currentStep === 4) {
                        previousStep = 3; // Réservation → Détails
                    } else if (currentStep === 3) {
                        previousStep = 1; // Détails → Formule (skip durée)
                    }
                }
                
                if (previousStep !== undefined) {
                    goToStep(previousStep);
                }
            }
        }

        function goToNextStep() {
            if (selectedService === 'massage') {
                goToStep(4); // Go to Step 4: Reservation
            } else if (selectedService === 'skincare') {
                goToStep(4); // Go to Step 4: Reservation (for Skincare)
            } else if (selectedService === 'lashlift') {
                goToStep(4); // Go to Step 4: Reservation (for Lashlift)
            } else {
                goToStep(4); // Go to Step 4: Reservation (for Head Spa)
            }
        }

        function updateProgress() {
            const stepsElement = getActiveStepsElement();
            
            // Hide duration step in progress bar for non-massage services
            const durationProgressStep = document.getElementById('progressStep2');
            const durationProgressLine = document.getElementById('progressLine2');
            
            if (durationProgressStep) {
                if (selectedService === 'massage') {
                    durationProgressStep.style.display = 'flex';
                } else {
                    durationProgressStep.style.display = 'none';
                }
            }
            
            if (durationProgressLine) {
                if (selectedService === 'massage') {
                    durationProgressLine.style.display = 'block';
                } else {
                    durationProgressLine.style.display = 'none';
                }
            }

            // Add step numbers to progress dots on mobile
            if (window.innerWidth <= 768) {
                const stepsElement = getActiveStepsElement();
                if (stepsElement) {
                    const progressSteps = stepsElement.querySelectorAll('.progress-step');
                    let visibleStepNumber = 1;

                    progressSteps.forEach((step) => {
                        // Check if the step is visible (not hidden with display:none)
                        const isVisible = window.getComputedStyle(step).display !== 'none';

                        if (isVisible) {
                            const dot = step.querySelector('.progress-dot');
                            if (dot) {
                                dot.setAttribute('data-step', visibleStepNumber);
                                visibleStepNumber++;
                            }
                        }
                    });
                }
            }
            
            // For 3-step modals (Head Spa)
            if (totalSteps === 3) {
                const steps = ['progressStep1', 'progressStep3', 'progressStep4'];
                const lines = ['progressLine1', 'progressLine3'];
                
                for (let i = 0; i < 3; i++) {
                    const step = document.getElementById(steps[i]);
                    const line = document.getElementById(lines[i]);
                    
                    if (!step) continue;
                    
                    step.classList.remove('active', 'completed');
                    
                    if (selectedService === 'head-spa') {
                        // For Head Spa: content steps are 1, 3, 4 and progress steps are 1, 2, 3
                        let progressStepIndex;
                        if (currentStep === 1) progressStepIndex = 0; // Formule
                        else if (currentStep === 3) progressStepIndex = 1; // Détails
                        else if (currentStep === 4) progressStepIndex = 2; // Réservation
                        else progressStepIndex = -1;
                        
                        if (i < progressStepIndex) {
                            step.classList.add('completed');
                            if (line) line.classList.add('completed');
                        } else if (i === progressStepIndex) {
                            step.classList.add('active');
                            if (line) line.classList.remove('completed');
                        } else {
                            if (line) line.classList.remove('completed');
                        }
                    } else if (selectedService === 'lashlift') {
                        // For Lashlift: content steps are 1, 3, 4 and progress steps are 1, 2, 3
                        let progressStepIndex;
                        if (currentStep === 1) progressStepIndex = 0; // Formule
                        else if (currentStep === 3) progressStepIndex = 1; // Détails
                        else if (currentStep === 4) progressStepIndex = 2; // Réservation
                        else progressStepIndex = -1;
                        
                        if (i < progressStepIndex) {
                            step.classList.add('completed');
                            if (line) line.classList.add('completed');
                        } else if (i === progressStepIndex) {
                            step.classList.add('active');
                            if (line) line.classList.remove('completed');
                        } else {
                            if (line) line.classList.remove('completed');
                        }
                    } else {
                        // For other 3-step services (if any)
                        if (i + 1 < currentStep) {
                            step.classList.add('completed');
                            if (line) line.classList.add('completed');
                        } else if (i + 1 === currentStep) {
                            step.classList.add('active');
                            if (line) line.classList.remove('completed');
                        } else {
                            if (line) line.classList.remove('completed');
                        }
                    }
                }
            }
            // For 4-step modals (Massage and Skincare)
            else if (totalSteps === 4) {
                let steps, lines;
                
                if (selectedService === 'massage') {
                    steps = ['progressStep1', 'progressStep2', 'progressStep3', 'progressStep4'];
                    lines = ['progressLine1', 'progressLine2', 'progressLine3'];
                } else {
                    // Skincare
                    steps = ['progressStep0', 'progressStep1-sk', 'progressStep2-sk', 'progressStep3-sk'];
                    lines = ['progressLine0', 'progressLine1-sk', 'progressLine2-sk'];
                }
                
                for (let i = 0; i < 4; i++) {
                    const step = document.getElementById(steps[i]);
                    const line = document.getElementById(lines[i]);
                    
                    if (!step) continue;
                    
                    step.classList.remove('active', 'completed');
                    
                    if (selectedService === 'massage') {
                        // For massage: steps are 1-indexed
                        if (i + 1 < currentStep) {
                            step.classList.add('completed');
                            if (line) line.classList.add('completed');
                        } else if (i + 1 === currentStep) {
                            step.classList.add('active');
                            if (line) line.classList.remove('completed');
                        } else {
                            if (line) line.classList.remove('completed');
                        }
                    } else {
                        // For skincare: steps are 0-indexed, but content steps are different
                        // Content steps: 0=Type, 1=Formule, 3=Détails, 4=Réservation
                        // Progress steps: 0=Type, 1=Formule, 2=Détails, 3=Réservation
                        let progressStepIndex;
                        if (currentStep === 0) progressStepIndex = 0; // Type
                        else if (currentStep === 1) progressStepIndex = 1; // Formule
                        else if (currentStep === 3) progressStepIndex = 2; // Détails
                        else if (currentStep === 4) progressStepIndex = 3; // Réservation
                        else progressStepIndex = -1;
                        
                        if (i < progressStepIndex) {
                            step.classList.add('completed');
                            if (line) line.classList.add('completed');
                        } else if (i === progressStepIndex) {
                            step.classList.add('active');
                            if (line) line.classList.remove('completed');
                        } else {
                            if (line) line.classList.remove('completed');
                        }
                    }
                }
            }
        }
        
        // --- Selection Handlers ---

        function filterFormulas(serviceId = '', formulaType = '') {
            console.log('filterFormulas called with:', { serviceId, formulaType });
            const cards = document.querySelectorAll('.formule-card');
            console.log('Found', cards.length, 'formula cards');
            
            cards.forEach((card, index) => {
                const cardService = card.getAttribute('data-service');
                const cardType = card.getAttribute('data-type');
                console.log(`Card ${index}: service="${cardService}", type="${cardType}"`);
                
                // Case 1: No service specified (hide all cards)
                if (!serviceId) {
                    console.log(`Card ${index}: hiding (no service)`);
                    card.style.display = 'none';
                    return;
                }
                
                // Case 2: Massage service - AFFICHER TOUTES les cartes massage, ignorer le type
                if (serviceId === 'massage') {
                    if (cardService === 'massage') {
                        console.log(`Card ${index}: showing (massage match)`);
                        card.style.display = 'flex';
                    } else {
                        console.log(`Card ${index}: hiding (not massage)`);
                        card.style.display = 'none';
                    }
                    return;
                }
                
                // Case 3: Head Spa service - afficher toutes les cartes head-spa, ignorer le type
                if (serviceId === 'head-spa') {
                    if (cardService === 'head-spa') {
                        console.log(`Card ${index}: showing (head-spa match)`);
                        card.style.display = 'flex';
                    } else {
                        console.log(`Card ${index}: hiding (not head-spa)`);
                        card.style.display = 'none';
                    }
                    return;
                }
                
                // Case 4: Skincare service - EXIGER que BOTH service ET type matchent
                if (serviceId === 'skincare') {
                    const serviceMatch = cardService === 'skincare';
                    const typeMatch = formulaType && cardType === formulaType;
                    console.log(`Card ${index}: serviceMatch=${serviceMatch}, typeMatch=${typeMatch}, formulaType="${formulaType}", cardType="${cardType}"`);
                    if (serviceMatch && typeMatch) {
                        console.log(`Card ${index}: showing (skincare + type match)`);
                        card.style.display = 'flex';
                    } else {
                        console.log(`Card ${index}: hiding (skincare mismatch)`);
                        card.style.display = 'none';
                    }
                    return;
                }
                
                // Case 5: Lashlift service - afficher toutes les cartes lashlift, ignorer le type
                if (serviceId === 'lashlift') {
                    if (cardService === 'lashlift') {
                        console.log(`Card ${index}: showing (lashlift match)`);
                        card.style.display = 'flex';
                    } else {
                        console.log(`Card ${index}: hiding (not lashlift)`);
                        card.style.display = 'none';
                    }
                    return;
                }
            });
        }

        function selectFormulaType(typeId, typeName, typeIcon, element) {
            console.log('=== selectFormulaType called ===');
            console.log('selectFormulaType called with:', { typeId, typeName, typeIcon });
            selectedFormulaType = typeId;
            selectedFormulaTypeName = typeName;
            console.log('selectedFormulaType set to:', selectedFormulaType);
            console.log('selectedService is:', selectedService);
            
            // Clear formula selection on type change
            selectedFormule = null;
            selectedFormuleName = '';
            basePrice = 0;
            
            document.querySelectorAll('.formula-type-card').forEach(card => card.classList.remove('selected'));
            element.classList.add('selected');

            // Filter and show only the formulas for the selected type
            filterFormulas('skincare', typeId);

            // Hide type cards and show formula cards
            document.getElementById('skincareTypeCards').style.display = 'none';
            document.getElementById('skincareCards').style.display = 'flex';

            setTimeout(() => {
                console.log('About to go to step 1, current step:', currentStep);
                goToStep(1); // Go to Step 1: Formula Selection
                console.log('After goToStep(1), current step:', currentStep);
            }, 300);
        }

        function selectFormule(formule, price, name, duration) {
            console.log('selectFormule called with:', { formule, price, name, duration, selectedService });
            selectedFormule = formule;
            selectedFormuleName = name;
            selectedDuration = duration;
            basePrice = price;
            priceMultiplier = 1;

            document.querySelectorAll('.formule-card').forEach(card => card.classList.remove('selected'));
            event.currentTarget.classList.add('selected');

            setTimeout(() => {
                if (selectedService === 'massage') {
                    console.log('Going to step 2 for massage...');
                    generateDurationOptions();
                    goToStep(2); // Go to Step 2: Duration Selection
                } else if (selectedService === 'skincare') {
                    goToStep(3); // Go to Step 3: Details (for Skincare)
                    updateServiceDetails(); // Update details for Skincare
                    updateSummary();
                } else if (selectedService === 'lashlift') {
                    goToStep(3); // Go to Step 3: Details (for Lashlift)
                    updateServiceDetails(); // Update details for Lashlift
                    updateSummary();
                } else {
                    goToStep(3); // Go to Step 3: Details (for Head Spa)
                    updateServiceDetails(); // Explicitly update details for Head Spa
                    updateSummary();
                }
            }, 300);
        }

        function generateDurationOptions() {
            console.log('generateDurationOptions called for:', selectedFormule);
            const durationOptions = document.getElementById('durationOptions');
            durationOptions.innerHTML = '';

            let durations = [];
            let prices = [];

            if (selectedFormule === 'calypsia' || selectedFormule === 'pyrhiia') {
                durations = ['30 min', '60 min', '90 min'];
                prices = [49, 79, 109]; // Prix pour CALYPSIA
                if (selectedFormule === 'pyrhiia') {
                    prices = [59, 89, 119]; // Prix pour PYRHIIA
                }
            } else if (selectedFormule === 'calypsia-aura' || selectedFormule === 'calypsia-terra') {
                durations = ['30 min', '45 min'];
                prices = [49, 69];
            }

            durations.forEach((duration, index) => {
                const durationButton = document.createElement('div');
                durationButton.className = 'duration-button';
                durationButton.onclick = () => selectDuration(duration, prices[index]);
                
                durationButton.innerHTML = `
                    <div class="duration-main">${duration}</div>
                    <div class="duration-sub">${prices[index]}€</div>
                `;
                
                durationOptions.appendChild(durationButton);
            });
        }

        function selectDuration(duration, price) {
            selectedDuration = duration;
            basePrice = price;
            priceMultiplier = 1;

            document.querySelectorAll('.duration-button').forEach(btn => btn.classList.remove('selected'));
            event.currentTarget.classList.add('selected');

            setTimeout(() => {
                goToStep(3); // Go to Step 3: Details
                updateSummary();
            }, 300);
        }

        function selectSoloDuo(type) {
            // Update toggle selection
            document.querySelectorAll('.toggle-option').forEach(option => {
                option.classList.remove('active');
            });
            event.currentTarget.classList.add('active');

            // Update price for Head Spa (DUO = prix par personne × 2)
            let finalPrice = basePrice;
            if (selectedService === 'head-spa') {
                if (type === 'solo') {
                    finalPrice = basePrice;
                } else if (type === 'duo') {
                    finalPrice = (basePrice - 10) * 2; // DUO: prix par personne × 2
                }
            } else {
                // For other services, use multiplier
                if (type === 'solo') {
                    priceMultiplier = 1;
                } else if (type === 'duo') {
                    priceMultiplier = 1.8;
                }
                finalPrice = Math.round(basePrice * priceMultiplier);
            }

            // Update price display
            const servicePrice = document.getElementById('detailsPrice');
            if (servicePrice) {
                servicePrice.textContent = `${finalPrice}€`;
            }

            // Update summary
            updateSummary();
        }


        function updateSummary() {
            let finalPrice;
            if (selectedService === 'head-spa') {
                // For Head Spa, DUO = prix par personne × 2
                const isDuo = document.querySelector('.toggle-option[data-type="duo"]')?.classList.contains('active');
                finalPrice = isDuo ? (basePrice - 10) * 2 : basePrice;
            } else {
                finalPrice = Math.round(basePrice * priceMultiplier);
            }

            // For Skincare, show type in separate row
            if (selectedService === 'skincare' && selectedFormulaTypeName) {
                document.getElementById('summaryService').textContent = selectedServiceName;
                document.getElementById('summaryTypeRow').style.display = 'flex';
                document.getElementById('summaryType').textContent = selectedFormulaTypeName;
            } else {
                // For Head Spa and Massage, don't show type row
                document.getElementById('summaryService').textContent = selectedServiceName;
                document.getElementById('summaryTypeRow').style.display = 'none';
            }

            document.getElementById('summaryFormule').textContent = selectedFormuleName;
            document.getElementById('summaryDuration').textContent = selectedDuration || '-';
            document.getElementById('summaryPrice').textContent = `${finalPrice}€`;
        }

        // Function removed - no longer needed since each service has its own modal
        
        // Final action on redirection step
        function bookAppointment(event) {
            // Prevent immediate redirection
            event.preventDefault(); 
            
            // Show the glassmorphism redirect modal
            showRedirectModal();
        }

        function showRedirectModal() {
            const modal = document.getElementById('redirectModal');
            const countdownElement = document.getElementById('countdown');
            
            // Show modal with animation
            modal.style.display = 'flex';
            setTimeout(() => {
                modal.classList.add('show');
            }, 10);
            
            // Initialize Lucide icons for the modal
            lucide.createIcons();
            
            // Start countdown
            let countdown = 3;
            countdownElement.textContent = countdown;
            
            const countdownInterval = setInterval(() => {
                countdown--;
                countdownElement.textContent = countdown;
                
                if (countdown <= 0) {
                    clearInterval(countdownInterval);
                    // Redirect to reservation page
                    window.location.href = "reservation.html";
                }
            }, 1000);
        }


        // --- Event Listeners and Initialization ---

        // Function to handle smooth scrolling to sections with offset
        function scrollToSection(sectionId) {
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                const offset = 100; // Offset to account for fixed menu
                const targetPosition = targetSection.offsetTop - offset;
                window.scrollTo({
                    top: targetPosition,
                    behavior: 'smooth'
                });
            }
        }

        document.addEventListener('DOMContentLoaded', function() {

        // Portal Menu setup (retained from original)
        const menuTrigger = document.getElementById('menuTrigger');
        const portalMenu = document.getElementById('portalMenu');
        const closePortal = document.getElementById('closePortal');
        const portalLinks = document.querySelectorAll('.portal-link');

        function openPortalMenu() {
            portalMenu.classList.add('open');
            document.body.style.overflow = 'hidden';
            
            // Animate links in sequence
            portalLinks.forEach((link, index) => {
                const delay = parseInt(link.dataset.delay) * 150 + 400;
                setTimeout(() => {
                    link.classList.add('animate-in');
                }, delay);
            });
        }

        function closePortalMenu() {
            portalMenu.classList.remove('open');
            document.body.style.overflow = '';
            
            // Reset link animations
            portalLinks.forEach(link => {
                link.classList.remove('animate-in');
            });
        }

        menuTrigger.addEventListener('click', openPortalMenu);
        closePortal.addEventListener('click', closePortalMenu);

        // Floating Menu Drag and Drop
        let isDragging = false;
        let startX, startY, startLeft, startTop;

        function handleMouseDown(e) {
            isDragging = true;
            menuTrigger.classList.add('dragging');
            
            startX = e.clientX;
            startY = e.clientY;
            
            const rect = menuTrigger.getBoundingClientRect();
            startLeft = rect.left;
            startTop = rect.top;
            
            document.addEventListener('mousemove', handleMouseMove);
            document.addEventListener('mouseup', handleMouseUp);
            
            e.preventDefault();
        }

        function handleMouseMove(e) {
            if (!isDragging) return;
            
            const deltaX = e.clientX - startX;
            const deltaY = e.clientY - startY;
            
            const newLeft = startLeft + deltaX;
            const newTop = startTop + deltaY;
            
            // Constrain to viewport
            const maxLeft = window.innerWidth - menuTrigger.offsetWidth;
            const maxTop = window.innerHeight - menuTrigger.offsetHeight;
            
            const constrainedLeft = Math.max(0, Math.min(newLeft, maxLeft));
            const constrainedTop = Math.max(0, Math.min(newTop, maxTop));
            
            menuTrigger.style.left = constrainedLeft + 'px';
            menuTrigger.style.top = constrainedTop + 'px';
            menuTrigger.style.right = 'auto';
            menuTrigger.style.transform = 'none';
        }

        function handleMouseUp() {
            if (!isDragging) return;
            
            isDragging = false;
            menuTrigger.classList.remove('dragging');
            
            document.removeEventListener('mousemove', handleMouseMove);
            document.removeEventListener('mouseup', handleMouseUp);
        }

        // Touch events for mobile
        function handleTouchStart(e) {
            const touch = e.touches[0];
            const mouseEvent = new MouseEvent('mousedown', {
                clientX: touch.clientX,
                clientY: touch.clientY
            });
            handleMouseDown(mouseEvent);
        }

        function handleTouchMove(e) {
            const touch = e.touches[0];
            const mouseEvent = new MouseEvent('mousemove', {
                clientX: touch.clientX,
                clientY: touch.clientY
            });
            handleMouseMove(mouseEvent);
        }

        function handleTouchEnd(e) {
            const mouseEvent = new MouseEvent('mouseup', {});
            handleMouseUp(mouseEvent);
        }

        menuTrigger.addEventListener('mousedown', handleMouseDown);
        menuTrigger.addEventListener('touchstart', handleTouchStart, { passive: false });
        menuTrigger.addEventListener('touchmove', handleTouchMove, { passive: false });
        menuTrigger.addEventListener('touchend', handleTouchEnd);

        // Close menu when clicking outside
        document.addEventListener('click', function(event) {
            if (portalMenu.classList.contains('open')) {
                const isClickInsideMenu = portalMenu.contains(event.target);
                const isClickOnTrigger = menuTrigger.contains(event.target);
                
                if (!isClickInsideMenu && !isClickOnTrigger) {
                    closePortalMenu();
                }
            }
        });

        // Close menu when clicking on a link
        portalLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                if (link.getAttribute('href').startsWith('#')) {
                    e.preventDefault();
                    const target = document.querySelector(link.getAttribute('href'));
                    if (target) {
                        closePortalMenu();
                        setTimeout(() => {
                            target.scrollIntoView({
                                behavior: 'smooth',
                                block: 'start'
                            });
                        }, 300);
                    }
                }
            });
        });

        // Close menu with Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && portalMenu.classList.contains('open')) {
                closePortalMenu();
            }
        });

        // Close modal when clicking outside
        document.getElementById('modalOverlay').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // Scroll reveal animations avec délais pour les éléments individuels
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    
                    // Animation des éléments individuels avec délais
                    const visual = entry.target.querySelector('.service-visual');
                    const content = entry.target.querySelector('.service-content-block');
                    
                    if (visual) {
                        setTimeout(() => {
                            visual.style.opacity = '1';
                            visual.style.transform = 'translateX(0)';
                        }, 200);
                    }
                    
                    if (content) {
                        setTimeout(() => {
                            content.style.opacity = '1';
                            content.style.transform = 'translateX(0)';
                        }, 400);
                    }
                }
            });
        }, { threshold: 0.2 });

        document.querySelectorAll('.service-showcase').forEach(el => {
            observer.observe(el);
        });

        // Initialize Lucide icons
        lucide.createIcons();

        // Timeline Animation
        const timelineObserverOptions = {
            threshold: 0.2,
            rootMargin: '0px 0px -50px 0px'
        };

        const timelineObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');

                    if (entry.target.id === 'timelineLine') {
                        entry.target.style.height = '100%';
                    }
                }
            });
        }, timelineObserverOptions);

        // Observer les éléments de la timeline
        document.querySelectorAll('.timeline-item, #timelineLine, .section-header').forEach(el => {
            timelineObserver.observe(el);
        });

        // Observer la section comparison header
        const comparisonHeader = document.getElementById('comparisonHeader');
        if (comparisonHeader) {
            timelineObserver.observe(comparisonHeader);
        }

        // Comparison slider functionality
        const comparisonSlider = document.getElementById('comparisonSlider');
        const comparisonDivider = document.getElementById('comparisonDivider');
        const comparisonAfter = document.querySelector('.comparison-after');

        if (comparisonSlider && comparisonDivider && comparisonAfter) {
            let isDragging = false;

            function updateComparison(x) {
                const rect = comparisonSlider.getBoundingClientRect();
                const position = Math.max(0, Math.min(x - rect.left, rect.width));
                const percentage = (position / rect.width) * 100;

                comparisonDivider.style.left = percentage + '%';
                comparisonAfter.style.clipPath = `inset(0 ${100 - percentage}% 0 0)`;
            }

            comparisonDivider.addEventListener('mousedown', (e) => {
                e.preventDefault();
                isDragging = true;
            });

            const handle = comparisonDivider.querySelector('.comparison-handle');
            if (handle) {
                handle.addEventListener('mousedown', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    isDragging = true;
                });
            }

            document.addEventListener('mouseup', () => {
                if (isDragging) {
                    isDragging = false;
                }
            });

            document.addEventListener('mousemove', (e) => {
                if (isDragging) {
                    updateComparison(e.clientX);
                }
            });

            comparisonSlider.addEventListener('click', (e) => {
                if (!isDragging) {
                    updateComparison(e.clientX);
                }
            });

            comparisonDivider.addEventListener('touchstart', (e) => {
                e.preventDefault();
                isDragging = true;
            });

            if (handle) {
                handle.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    isDragging = true;
                });
            }

            document.addEventListener('touchend', () => {
                if (isDragging) {
                    isDragging = false;
                }
            });

            document.addEventListener('touchmove', (e) => {
                if (isDragging) {
                    e.preventDefault();
                    updateComparison(e.touches[0].clientX);
                }
            });
        }

        // Scroll to top functionality
        const scrollToTopBtn = document.getElementById('scrollToTop');
        let lastScrollTop = 0;
        let isScrollingUp = false;

        window.addEventListener('scroll', () => {
            const currentScrollTop = window.pageYOffset;
            
            // Détecter la direction du scroll
            if (currentScrollTop < lastScrollTop) {
                // On remonte
                isScrollingUp = true;
            } else {
                // On descend
                isScrollingUp = false;
            }
            
            // Afficher la flèche seulement si on a scrollé plus de 300px ET qu'on remonte
            if (currentScrollTop > 300 && isScrollingUp) {
                scrollToTopBtn.classList.add('visible');
            } else {
                scrollToTopBtn.classList.remove('visible');
            }
            
            lastScrollTop = currentScrollTop;
        });

        scrollToTopBtn.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });

        // Zen Scroll Progress Bar
        function initZenProgressBar() {
            const progressFill = document.querySelector('.progress-fill-zen');
            const zenParticles = document.querySelector('.zen-particles');
            
            if (!progressFill) return;
            
            let particleInterval;
            
            function updateProgress() {
                const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                const scrollHeight = document.documentElement.scrollHeight - window.innerHeight;
                const scrollPercentage = (scrollTop / scrollHeight) * 100;
                
                progressFill.style.width = scrollPercentage + '%';
                
                // Create zen particles when scrolling
                if (scrollPercentage > 0 && scrollPercentage < 100) {
                    createZenParticle();
                }
            }
            
            function createZenParticle() {
                if (!zenParticles) return;
                
                const particle = document.createElement('div');
                particle.className = 'zen-particle';
                
                // Position at the end of the progress bar
                const progressWidth = progressFill.offsetWidth;
                particle.style.left = Math.max(0, progressWidth - 10) + 'px';
                particle.style.top = '50%';
                
                zenParticles.appendChild(particle);
                
                // Remove particle after animation
                setTimeout(() => {
                    if (particle.parentNode) {
                        particle.parentNode.removeChild(particle);
                    }
                }, 2000);
            }
            
            // Throttled scroll event
            let ticking = false;
            
            function onScroll() {
                if (!ticking) {
                    requestAnimationFrame(() => {
                        updateProgress();
                        ticking = false;
                    });
                    ticking = true;
                }
            }
            
            window.addEventListener('scroll', onScroll);
            
            // Initial update
            updateProgress();
        }

        // Initialize zen progress bar
        initZenProgressBar();

        // Benefit Pills Animation
        function initBenefitPillsAnimation() {
            const benefitPills = document.querySelectorAll('.benefit-pill');
            
            if (benefitPills.length === 0) return;
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate-in');
                    }
                });
            }, {
                threshold: 0.3,
                rootMargin: '0px 0px -50px 0px'
            });
            
            benefitPills.forEach(pill => {
                observer.observe(pill);
            });
        }

        // Initialize benefit pills animation
        initBenefitPillsAnimation();

        // CTA Button Animation
        function initCTAButtonAnimation() {
            const ctaButtons = document.querySelectorAll('.service-cta-button');
            
            if (ctaButtons.length === 0) return;
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate-in');
                    }
                });
            }, {
                threshold: 0.2,
                rootMargin: '0px 0px -30px 0px'
            });
            
            ctaButtons.forEach(button => {
                observer.observe(button);
            });
        }

        // Initialize CTA button animation
        initCTAButtonAnimation();

        // Services Tabs Functionality
        function initServicesTabs() {
            const tabs = document.querySelectorAll('.service-tab');
            const sections = document.querySelectorAll('.service-section');
            const tabsMenu = document.querySelector('.services-tabs-menu');
            const servicesSection = document.querySelector('.services-master-container');

            // Click functionality - scroll to section
            tabs.forEach(tab => {
                tab.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetService = tab.getAttribute('data-service');
                    
                    // Find the target section by ID
                    const targetSection = document.getElementById(`${targetService}-section`);
                    if (targetSection) {
                        // Scroll to the top of the target section
                        targetSection.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });

            // Scroll-based activation
            function updateActiveTab() {
                if (!servicesSection || !tabsMenu) return;

                const servicesRect = servicesSection.getBoundingClientRect();
                const isInServicesSection = servicesRect.top <= window.innerHeight && servicesRect.bottom >= 0;

                // Show/hide tabs menu based on section visibility
                if (isInServicesSection) {
                    tabsMenu.classList.remove('hidden');
                    tabsMenu.classList.add('visible');
                } else {
                    tabsMenu.classList.add('hidden');
                    tabsMenu.classList.remove('visible');
                    return;
                }

                // Find which service is most visible in viewport
                let mostVisibleService = null;
                let maxVisibility = 0;

                sections.forEach(section => {
                    const rect = section.getBoundingClientRect();
                    const viewportHeight = window.innerHeight;
                    
                    // Calculate what percentage of this section is visible in viewport
                    const visibleTop = Math.max(0, rect.top);
                    const visibleBottom = Math.min(viewportHeight, rect.bottom);
                    const visibleHeight = Math.max(0, visibleBottom - visibleTop);
                    const visibility = visibleHeight / Math.min(rect.height, viewportHeight);

                    // Only consider sections that are at least 20% visible
                    if (visibility > 0.2 && visibility > maxVisibility) {
                        maxVisibility = visibility;
                        // Extract service name from section ID (e.g., "head-spa-section" -> "head-spa")
                        mostVisibleService = section.id.replace('-section', '');
                    }
                });

                // Update active tab only if we found a visible service
                if (mostVisibleService) {
                    tabs.forEach(tab => {
                        tab.classList.remove('active');
                        if (tab.getAttribute('data-service') === mostVisibleService) {
                            tab.classList.add('active');
                        }
                    });
                }
            }

            // Throttled scroll listener
            let ticking = false;
            function onScroll() {
                if (!ticking) {
                    requestAnimationFrame(() => {
                        updateActiveTab();
                        ticking = false;
                    });
                    ticking = true;
                }
            }

            window.addEventListener('scroll', onScroll);
            
            // Initial call
            updateActiveTab();
        }

        // Initialize services tabs
        initServicesTabs();

        // Formula cards initialization removed - no longer needed since each service has its own modal

        // Zoom Animation for Comparison Section
        function initZoomAnimation() {
            const comparisonSection = document.querySelector('.comparison-section');
            const slider = document.querySelector('.comparison-slider');
            
            if (!comparisonSection || !slider) return;

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        // Add zoom-in animation
                        slider.classList.add('animate-in');
                    }
                });
            }, {
                threshold: 0.3,
                rootMargin: '0px 0px -100px 0px'
            });

            observer.observe(comparisonSection);
        }

        // Initialize zoom animation
        initZoomAnimation();
        });
    </script>

    <!-- Comparison Section - Résultats Visibles -->
    <section class="comparison-section">
        <div class="comparison-container">
            <div class="section-header" id="comparisonHeader">
                <h2 class="section-title">Résultats Visibles</h2>
                <p class="section-subtitle">La différence avant et après nos soins</p>
            </div>

            <div class="comparison-slider" id="comparisonSlider">
                <img class="comparison-image" src="images/avant.jpg" alt="Avant">
                <img class="comparison-image comparison-after" src="images/après.jpg" alt="Après">
                <div class="comparison-divider" id="comparisonDivider">
                    <div class="comparison-handle">⇄</div>
                </div>
                <div class="comparison-label label-before">Avant</div>
                <div class="comparison-label label-after">Après</div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <img src="logos/Logo1.svg" alt="Dream Skin" style="max-width: 150px; margin-bottom: 1.5rem; filter: brightness(0) invert(1);">
                    <p>Institut de bien-être dédié à votre beauté intérieure et extérieure. Spécialistes du head spa, massage et skincare coréenne.</p>
                </div>
                <div class="footer-section">
                    <h3>Contact</h3>
                    <p><a href="https://www.google.com/maps/search/5+rue+de+la+Liberté+95500+Gonesse" target="_blank" style="color: inherit; text-decoration: none;">5, rue de la Liberté<br>95500 Gonesse</a><br><br>
                    <a href="tel:+33629338589" style="color: inherit; text-decoration: none;">06 29 33 85 89</a><br>
                    <a href="mailto:contact@dreamskin.fr">contact@dreamskin.fr</a></p>
                    <div class="social-links">
                        <a href="https://www.instagram.com/dreamskin.off/" target="_blank" class="social-link" title="Instagram Dream Skin">
                            <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
                                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                            </svg>
                        </a>
                        <a href="https://wa.me/33629338589?text=Bonjour%20!%0AJ'aimerais%20réserver%20un%20moment%20de%20détente%20chez%20Dream%20Skin%20et%20j'aurais%20quelques%20questions." target="_blank" class="social-link" title="WhatsApp Dream Skin">
                            <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
                                <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.525 3.105"/>
                            </svg>
                        </a>
                    </div>
                </div>
                <div class="footer-section">
                    <h3>Horaires</h3>
                    <p>Mardi - Dimanche : 10h - 20h<br><br>
                    Fermé le lundi</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Dream Skin. Tous droits réservés.</p>
                <div class="footer-links">
                    <a href="mentions-legales.html">Mentions légales</a>
                    <span class="footer-separator">|</span>
                    <a href="politique-confidentialite.html">Politique de confidentialité</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scroll to Top Button -->
    <button class="scroll-to-top" id="scrollToTop">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="18,15 12,9 6,15"></polyline>
        </svg>
    </button>
    
    <!-- Curseur personnalisé -->
    <link rel="stylesheet" href="assets/css/custom-cursor.css">
    <script src="assets/js/custom-cursor.js"></script>
</body>
</html>


